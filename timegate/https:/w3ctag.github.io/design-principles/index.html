

<!doctype html>
    <html lang="en-US" id="template-archives" class="base">
        <head>
        
        <script defer data-domain="context.center" src="https://plausible.io/js/plausible.js"></script>
        <link rel="alternate" type="application/rss+xml" title="Context Center RSS" href="https://context.center/rss/" />
    	<link rel="alternate" type="application/atom+xml" title="Context Center Feed" href="https://context.center/feed/" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Web Platform Design Principles</title>
        <link rel="original" http-equiv href="https://w3ctag.github.io/design-principles" />
        
            
                <!-- <link rel="stylesheet" href="https://context.center/assets/css/template-archives.css?v=2097943621" /> -->
                <link rel="stylesheet" href="https://context.center/assets/css/template-archives.css?v=2097943621" id=""></link>

            
        
        
            <link rel="canonical" href="https://w3ctag.github.io/design-principles" />
            

            <meta property="og:title"
                content="Web Platform Design Principles">

            <meta property="og:description"
                content="The Design Principles are directly informed by the ethical framework set out in the Ethical Web Principles [ETHICAL-WEB]. These principles provide concrete...">


            <meta property="og:url"
                content="https://w3ctag.github.io/design-principles" />

            <meta property="og:site_name" content="Context Center" />

            <meta property="og:locale" content="en_US" />

            <meta name="twitter:site" content="@chronotope" />

            <meta name="twitter:description" content="The Design Principles are directly informed by the ethical framework set out in the Ethical Web Principles [ETHICAL-WEB]. These principles provide concrete..." />

            <!-- I prefer the summary_large_image Twitter card for posts. -->
            <meta name="twitter:card" content="summary_large_image" />
            <!-- You, you're the creator. -->
            <meta name="twitter:creator" content="@chronotope" />
            <!-- This property is for the article title, not site title. -->
            <meta name="twitter:title" content="Web Platform Design Principles" />

            

            <meta property="og:type" content="website" />

            <script type="application/ld+json">
                {
                    "@context": "http://schema.org",
                    "@type": "WebPage",
                    "url": "https://w3ctag.github.io/design-principles",
                    "headline": "Web Platform Design Principles",
                    "about": "The Design Principles are directly informed by the ethical framework
set out in the Ethical Web Principles [ETHICAL-WEB].
These principles provide concrete practical advice
in response to the higher level ethical responsibilities
that come with developing the web platform.",

                    "image": [
                        
                        
                    ],
                    "isAccessibleForFree": "True",
                    "isPartOf": {
                        "@type": ["CreativeWork", "Product"],
                        "name": "Fight With Tools",
                        "productID": "fightwithtools.dev"
                    },
                    "license": "http://creativecommons.org/licenses/by-sa/4.0/",
                    "archivedAt": "https://context.center/timegate/https:/w3ctag.github.io/design-principles/",
                    "sameAs": "https://w3ctag.github.io/design-principles",
                }
            </script>


        
        
        </head>
        <body >
            <div class="wrapper">
                <header>
                    <div class="left">
                        <h1>Archived: Web Platform Design Principles</h1>
                        <p>This is a simplified archive of the page at <a href="https://w3ctag.github.io/design-principles" target="_blank">https://w3ctag.github.io/design-principles</a></p>
                    </div>

                            <div id="share-embed">
                                <span>Use this page embed on your own site:</span>
                                <textarea id="html-embed" name="story" rows="8" cols="40">
                                    <script>window.contexterSetup=window.contexterSetup||function(){window.contexterSetupComplete=!0;class ContexterLink extends HTMLAnchorElement{constructor(){super()}connectedCallback(){this.setAttribute("target","_blank")}}customElements.define("contexter-link",ContexterLink,{extends:"a"}),customElements.define("contexter-inner",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__inner"}}),customElements.define("contexter-thumbnail",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__thumbnail"}}),customElements.define("contexter-byline",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__byline"}}),customElements.define("contexter-keywordset",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__keywordset"}}),customElements.define("contexter-linkset",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__linkset"}}),customElements.define("contexter-meta",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__meta"}}),customElements.define("contexter-summary",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="p-summary entry-summary"}}),customElements.define("contexter-box-head",class extends HTMLElement{constructor(){super()}connectedCallback(){this.className="contexter-box__head"}}),customElements.define("contexter-box-inner",class extends HTMLElement{constructor(){super()}connectedCallback(){}});class ContexterBox extends HTMLElement{constructor(){super(),this.first=!0,this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){if(this.first){this.first=!1;var style=document.createElement("style"),lightDomStyle=(style.innerHTML=`:host {--background: #f5f6f7;--border: darkblue;--blue: #0000ee;--font-color: black;--inner-border: black;font-family: Franklin,Arial,Helvetica,sans-serif;font-size: 14px;background: var(--background);width: 600px;color: var(--font-color);min-height: 90px;display: block;padding: 8px;border: 1px solid var(--border);cursor: pointer;box-sizing: border-box;margin: 6px;contain: content;margin: 6px auto;}// can only select top-level nodes with slotted::slotted(*) {max-width: 100%;display:block;}::slotted([slot=thumbnail]) {max-width: 100%;display:block;}::slotted([slot=header]) {width: 100%;font-size: 1.25rem;font-weight: bold;display:block;margin-bottom: 6px;}::slotted([slot=author]) {max-width: 50%;font-size: 12px;display:inline-block;float: left;}::slotted([slot=time]) {max-width: 50%;font-size: 12px;display:inline-block;float: right;}::slotted([slot=summary]) {width: 100%;margin-top: 6px;padding: 10px 2px;border-top: 1px solid var(--inner-border);font-size: 15px;display:inline-block;margin-bottom: 6px;}contexter-meta {height: auto;margin-bottom: 4px;width: 100%;display: grid;position: relative;min-height: 16px;grid-template-columns: repeat(2, 1fr);}::slotted([slot=keywords]) {width: 80%;padding: 2px 4px;border-top: 1px solid var(--inner-border);font-size: 11px;display: block;float: right;font-style: italic;text-align: right;grid-column: 2/2;grid-row: 1;align-self: end;justify-self: end;}::slotted([slot=keywords]):empty {border-top: 0px solid var(--inner-border);}::slotted([slot=archive-link]) {font-size: 1em;display: inline;}::slotted([slot=archive-link])::after {content: "|";display: inline;color: var(--font-color);text-decoration: none;margin: 0 .5em;}::slotted([slot=read-link]) {font-size: 1em;display: inline;}contexter-linkset {width: 80%;padding: 2px 4px;font-size: 13px;float: left;font-weight: bold;grid-row: 1;grid-column: 1/2;align-self: end;justify-self: start;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {:host {width: 310px;}}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){:host {--background: #354150;--border: #1f2b37;--blue: #55b0ff;--font-color: #ffffff;--inner-border: #787a7c;background: var(--background);border: 1px solid var(--border)}}`,document.createElement("style"));lightDomStyle.innerHTML=`contexter-box {contain: content;}contexter-box .read-link {font-weight: bold;}contexter-box a {color: #0000ee;}contexter-box img {width: 100%;border: 0;padding: 0;margin: 0;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {...}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){contexter-box a {color: #55b0ff;}}`,this.appendChild(lightDomStyle),this.shadow.appendChild(style);const innerContainer=document.createElement("contexter-box-inner"),innerSlotThumbnail=(this.shadow.appendChild(innerContainer),document.createElement("slot")),innerSlotHeader=(innerSlotThumbnail.name="thumbnail",innerContainer.appendChild(innerSlotThumbnail),document.createElement("slot")),innerSlotAuthor=(innerSlotHeader.name="header",innerContainer.appendChild(innerSlotHeader),document.createElement("slot")),innerSlotTime=(innerSlotAuthor.name="author",innerContainer.appendChild(innerSlotAuthor),document.createElement("slot")),innerSlotSummary=(innerSlotTime.name="time",innerContainer.appendChild(innerSlotTime),document.createElement("slot")),metaContainer=(innerSlotSummary.name="summary",innerContainer.appendChild(innerSlotSummary),document.createElement("contexter-meta")),innerSlotInfo=(innerContainer.appendChild(metaContainer),document.createElement("slot")),linkContainer=(innerSlotInfo.name="keywords",metaContainer.appendChild(innerSlotInfo),document.createElement("contexter-linkset")),innerSlotArchiveLink=(metaContainer.appendChild(linkContainer),document.createElement("slot")),innerSlotReadLink=(innerSlotArchiveLink.name="archive-link",linkContainer.appendChild(innerSlotArchiveLink),document.createElement("slot"));innerSlotReadLink.name="read-link",linkContainer.appendChild(innerSlotReadLink),this.className="contexter-box",this.onclick=e=>{if(!e.target.className.includes("read-link")&&!e.target.className.includes("title-link")){const mainLinks=this.querySelectorAll("a.main-link");mainLinks[0].click()}}}}}customElements.define("contexter-box",ContexterBox)},window.contexterSetupComplete||window.contexterSetup();</script><contexter-box class="link-card h-entry hentry" itemscope="" itemtype="https://schema.org/CreativeWork"><contexter-thumbnail class="thumbnail" slot="thumbnail"></contexter-thumbnail><contexter-box-head slot="header" class="p-name entry-title" itemprop="headline"><contexter-box-head slot="header" class="p-name entry-title" itemprop="headline"><a is="contexter-link" href="https://www.w3.org/TR/design-principles/" itemprop="url">Web Platform Design Principles</a></contexter-box-head></contexter-box-head><time class="dt-published published" slot="time" itemprop="datePublished" datetime="2022-04-05T17:38:56.137Z">3/5/2022</time><contexter-summary class="p-summary entry-summary" itemprop="abstract" slot="summary"><p>The Design Principles are directly informed by the ethical frameworkset out in the Ethical Web Principles [ETHICAL-WEB].These principles provide concrete practical advicein response to the higher level ethical responsibilitiesthat come with developing the web platform.</p></contexter-summary><contexter-keywordset itemprop="keywords" slot="keywords"></contexter-keywordset><a is="contexter-link" href="https://www.w3.org/TR/design-principles/" class="read-link main-link" itemprop="sameAs" slot="read-link">Read</a><a href="https://context.center/timegate/https://w3ctag.github.io/design-principles" is="contexter-link" target="_blank" class="read-link archive-link" itemprop="archivedAt" slot="archive-link">Archived</a></contexter-box>
                                </textarea><br />
                                <button onclick="(function(e){ navigator.clipboard.writeText(document.getElementById('html-embed').value); })()">Copy</button>
                            </div>
                            
                            <script>window.contexterSetup=window.contexterSetup||function(){window.contexterSetupComplete=!0;class ContexterLink extends HTMLAnchorElement{constructor(){super()}connectedCallback(){this.setAttribute("target","_blank")}}customElements.define("contexter-link",ContexterLink,{extends:"a"}),customElements.define("contexter-inner",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__inner"}}),customElements.define("contexter-thumbnail",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__thumbnail"}}),customElements.define("contexter-byline",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__byline"}}),customElements.define("contexter-keywordset",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__keywordset"}}),customElements.define("contexter-linkset",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__linkset"}}),customElements.define("contexter-meta",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="contexter-box__meta"}}),customElements.define("contexter-summary",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className="p-summary entry-summary"}}),customElements.define("contexter-box-head",class extends HTMLElement{constructor(){super()}connectedCallback(){this.className="contexter-box__head"}}),customElements.define("contexter-box-inner",class extends HTMLElement{constructor(){super()}connectedCallback(){}});class ContexterBox extends HTMLElement{constructor(){super(),this.first=!0,this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){if(this.first){this.first=!1;var style=document.createElement("style"),lightDomStyle=(style.innerHTML=`:host {--background: #f5f6f7;--border: darkblue;--blue: #0000ee;--font-color: black;--inner-border: black;font-family: Franklin,Arial,Helvetica,sans-serif;font-size: 14px;background: var(--background);width: 600px;color: var(--font-color);min-height: 90px;display: block;padding: 8px;border: 1px solid var(--border);cursor: pointer;box-sizing: border-box;margin: 6px;contain: content;margin: 6px auto;}// can only select top-level nodes with slotted::slotted(*) {max-width: 100%;display:block;}::slotted([slot=thumbnail]) {max-width: 100%;display:block;}::slotted([slot=header]) {width: 100%;font-size: 1.25rem;font-weight: bold;display:block;margin-bottom: 6px;}::slotted([slot=author]) {max-width: 50%;font-size: 12px;display:inline-block;float: left;}::slotted([slot=time]) {max-width: 50%;font-size: 12px;display:inline-block;float: right;}::slotted([slot=summary]) {width: 100%;margin-top: 6px;padding: 10px 2px;border-top: 1px solid var(--inner-border);font-size: 15px;display:inline-block;margin-bottom: 6px;}contexter-meta {height: auto;margin-bottom: 4px;width: 100%;display: grid;position: relative;min-height: 16px;grid-template-columns: repeat(2, 1fr);}::slotted([slot=keywords]) {width: 80%;padding: 2px 4px;border-top: 1px solid var(--inner-border);font-size: 11px;display: block;float: right;font-style: italic;text-align: right;grid-column: 2/2;grid-row: 1;align-self: end;justify-self: end;}::slotted([slot=keywords]):empty {border-top: 0px solid var(--inner-border);}::slotted([slot=archive-link]) {font-size: 1em;display: inline;}::slotted([slot=archive-link])::after {content: "|";display: inline;color: var(--font-color);text-decoration: none;margin: 0 .5em;}::slotted([slot=read-link]) {font-size: 1em;display: inline;}contexter-linkset {width: 80%;padding: 2px 4px;font-size: 13px;float: left;font-weight: bold;grid-row: 1;grid-column: 1/2;align-self: end;justify-self: start;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {:host {width: 310px;}}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){:host {--background: #354150;--border: #1f2b37;--blue: #55b0ff;--font-color: #ffffff;--inner-border: #787a7c;background: var(--background);border: 1px solid var(--border)}}`,document.createElement("style"));lightDomStyle.innerHTML=`contexter-box {contain: content;}contexter-box .read-link {font-weight: bold;}contexter-box a {color: #0000ee;}contexter-box img {width: 100%;border: 0;padding: 0;margin: 0;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {...}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){contexter-box a {color: #55b0ff;}}`,this.appendChild(lightDomStyle),this.shadow.appendChild(style);const innerContainer=document.createElement("contexter-box-inner"),innerSlotThumbnail=(this.shadow.appendChild(innerContainer),document.createElement("slot")),innerSlotHeader=(innerSlotThumbnail.name="thumbnail",innerContainer.appendChild(innerSlotThumbnail),document.createElement("slot")),innerSlotAuthor=(innerSlotHeader.name="header",innerContainer.appendChild(innerSlotHeader),document.createElement("slot")),innerSlotTime=(innerSlotAuthor.name="author",innerContainer.appendChild(innerSlotAuthor),document.createElement("slot")),innerSlotSummary=(innerSlotTime.name="time",innerContainer.appendChild(innerSlotTime),document.createElement("slot")),metaContainer=(innerSlotSummary.name="summary",innerContainer.appendChild(innerSlotSummary),document.createElement("contexter-meta")),innerSlotInfo=(innerContainer.appendChild(metaContainer),document.createElement("slot")),linkContainer=(innerSlotInfo.name="keywords",metaContainer.appendChild(innerSlotInfo),document.createElement("contexter-linkset")),innerSlotArchiveLink=(metaContainer.appendChild(linkContainer),document.createElement("slot")),innerSlotReadLink=(innerSlotArchiveLink.name="archive-link",linkContainer.appendChild(innerSlotArchiveLink),document.createElement("slot"));innerSlotReadLink.name="read-link",linkContainer.appendChild(innerSlotReadLink),this.className="contexter-box",this.onclick=e=>{if(!e.target.className.includes("read-link")&&!e.target.className.includes("title-link")){const mainLinks=this.querySelectorAll("a.main-link");mainLinks[0].click()}}}}}customElements.define("contexter-box",ContexterBox)},window.contexterSetupComplete||window.contexterSetup();</script><contexter-box class="link-card h-entry hentry" itemscope="" itemtype="https://schema.org/CreativeWork"><contexter-thumbnail class="thumbnail" slot="thumbnail"></contexter-thumbnail><contexter-box-head slot="header" class="p-name entry-title" itemprop="headline"><contexter-box-head slot="header" class="p-name entry-title" itemprop="headline"><a is="contexter-link" href="https://www.w3.org/TR/design-principles/" itemprop="url">Web Platform Design Principles</a></contexter-box-head></contexter-box-head><time class="dt-published published" slot="time" itemprop="datePublished" datetime="2022-04-05T17:38:56.137Z">3/5/2022</time><contexter-summary class="p-summary entry-summary" itemprop="abstract" slot="summary"><p>The Design Principles are directly informed by the ethical frameworkset out in the Ethical Web Principles [ETHICAL-WEB].These principles provide concrete practical advicein response to the higher level ethical responsibilitiesthat come with developing the web platform.</p></contexter-summary><contexter-keywordset itemprop="keywords" slot="keywords"></contexter-keywordset><a is="contexter-link" href="https://www.w3.org/TR/design-principles/" class="read-link main-link" itemprop="sameAs" slot="read-link">Read</a><a href="https://context.center/timegate/https://w3ctag.github.io/design-principles" is="contexter-link" target="_blank" class="read-link archive-link" itemprop="archivedAt" slot="archive-link">Archived</a></contexter-box>
                            


                </header>
                <main>
                
                    <div id="readability-page-1" class="page"><div>
   <h2 data-level="1" id="basic-principles"><span>1. </span><span>Principles behind design of Web APIs</span><a href="#basic-principles"></a></h2>
   <p>The Design Principles are directly informed by the ethical framework
set out in the Ethical Web Principles <a data-link-type="biblio" href="#biblio-ethical-web">[ETHICAL-WEB]</a>.
These principles provide concrete practical advice
in response to the higher level ethical responsibilities
that come with developing the web platform.</p>
   <h3 data-level="1.1" id="priority-of-constituencies"><span>1.1. </span><span>Put user needs first (Priority of Constituencies)</span><a href="#priority-of-constituencies"></a></h3>
   <p>If a trade-off needs to be made,
always put user needs above all.</p>
   <p>Similarly, when beginning to design an API,
be sure to understand and document the user need that the API aims to address.</p>
   <p><a href="https://tools.ietf.org/html/rfc8890">The internet is for end users</a>:
any change made to the web platform has the potential to <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#allpeople">affect vast numbers of people</a>,
and may have a profound impact on any person’s life. <a data-link-type="biblio" href="#biblio-rfc8890">[RFC8890]</a></p>
   <p>User needs come before the needs of web page authors,
which come before than the needs of user agent implementors,
which come before than the needs of specification writers,
which come before theoretical purity.</p>
   <p>Like all principles,
this isn’t absolute.
Ease of authoring affects how content reaches users.
User agents have to prioritize finite engineering resources,
which affects how features reach authors.
Specification writers also have finite resources,
and theoretical concerns reflect underlying needs of all of these groups.</p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#noharm">The web should not cause harm to society</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#control">The web must enhance individuals' control and power</a></p>
    </li><li data-md="">
     <p><a data-link-type="biblio" href="#biblio-rfc8890">[RFC8890]</a></p>
   </li></ul>
   <h3 data-level="1.2" id="safe-to-browse"><span>1.2. </span><span>It should be safe to visit a web page</span><a href="#safe-to-browse"></a></h3>
   <p>When adding new features,
design them to preserve the user expectation
that visiting a web page is generally safe.</p>
   <p>The Web is named for its hyperlinked structure.
In order for the web to remain vibrant,
users need to be able to expect that merely visiting any given link
won’t have implications for the security of their computer,
or for any essential aspects of their <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#privacy">privacy</a>.</p>
   <p>For example, an API which allows any website to <a href="#do-not-expose-use-of-assistive-tech">detect the use of assistive technologies</a> may make users of these technologies feel unsafe visiting unknown web pages,
since any web page may detect this private information.</p>
   <p>If users have a realistic expectation of safety,
they can make informed decisions
between Web-based technologies and other technologies.
For example, users may choose to use a web-based food ordering page,
rather than installing an app,
since installing a native app is riskier than visiting a web page.</p>
   <p>To work towards making sure the reality of safety on the web matches users' expectations,
we can take complementary approaches when adding new features:</p>
   <ul>
    <li data-md="">
     <p>We can improve the user interfaces through which the Web is used
to make it clearer what users of the Web should (and should not) expect;</p>
    </li><li data-md="">
     <p>We can change the technical foundations of the Web
so that they match user expectations of privacy;</p>
    </li><li data-md="">
     <p>We can consider the cases where users would be better off
if expectations were higher,
and in those cases
try to change both technical foundations and expectations.</p>
   </li></ul>
   <p>A new feature which introduces safety risks may still improve user safety overall,
if it allows users to perform a task more safely on a web page
than it would be for them to install a native app to do the same thing.
However, this benefit needs to be weighed against the common goal
of users having a reasonable expectation of safety on web pages.</p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/">Security and Privacy Self-Review</a></p>
   </li></ul>
   <h3 data-level="1.3" id="trusted-ui"><span>1.3. </span><span>Trusted user interface should be trustworthy</span><a href="#trusted-ui"></a></h3>
   <p>Consider whether new features impact trusted user interfaces.</p>
   <p>Users depend on trusted user interfaces
such as the address bar, security indicators and permission prompts,
to understand who they are interacting with and how.
These trusted user interfaces must be able to be designed in a way
that enables users to trust <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#verify">and verify</a> that the information they provide is genuine,
and hasn’t been spoofed or hijacked by the website.</p>
   <p>If a new feature allows untrusted user interfaces
to resemble trusted user interfaces,
this makes it more difficult for users to understand what information is trustworthy.</p>
   <p id="example-59575e9e"><a href="#example-59575e9e"></a> For example, JavaScript <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert-noargs" id="ref-for-dom-alert-noargs">alert()</a></code> allows a page to show a modal dialog which looks like part of the browser.
This is often used to attempt to trick users into visiting scam websites.
If this feature was proposed today, it would probably not proceed. </p>
   <h3 data-level="1.4" id="consent"><span>1.4. </span><span>Ask users for meaningful consent when appropriate</span><a href="#consent"></a></h3>
   <p>If a useful feature has the potential to cause harm to users,
make sure that the user can give <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#control">*meaningful consent*</a> for that feature to be used,
and that they can refuse consent effectively.</p>
   <p>In order to give <em>meaningful consent</em>, the user must:</p>
   <ul>
    <li data-md="">
     <p><strong>understand</strong> what permission they may choose whether to grant the web page</p>
    </li><li data-md="">
     <p>be able to choose to give or refuse that permission <strong>effectively</strong>.</p>
   </li></ul>
   <p>If a feature is powerful enough to require a user consent,
but it’s impossible to explain to a typical user what they are consenting to,
that’s a signal that you may need to reconsider the design of the feature.</p>
   <p>If a permission prompt is shown,
and the user doesn’t grant permission,
the Web page should not be able to do anything
that the user believes they have refused consent for.</p>
   <p>By asking for consent,
we can inform the user of what capabilities the web page does or doesn’t have,
reinforcing their confidence that <a href="#safe-to-browse">the web is safe</a>.
However, the <a href="#priority-of-constituencies">user benefit</a> of a new feature must justify the additional burden on users
to decide whether to grant permission for each feature
whenever it’s requested by a Web page.</p>
   <p id="example-07793d34"><a href="#example-07793d34"></a> For example,
the <a href="https://www.w3.org/TR/geolocation-API/">Geolocation API</a> grants access to a user’s location.
This can help users in some contexts,
like a mapping application,
but may be dangerous to some users in other contexts -
especially if used without the user’s knowledge.
So that the user may decide whether their location may be used by a Web page,
a permission prompt should be shown to the user asking whether to grant location access.
If the user refuses permission,
no location information is available to the Web page. </p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#privacy">Security and privacy are essential</a></p>
   </li></ul>
   <h3 data-level="1.5" id="devices-platforms"><span>1.5. </span><span>Support the full range of devices and platforms (Media Independence)</span><a href="#devices-platforms"></a></h3>
   <p>As much as possible,
ensure that features on the web work across different input and output [devices,
screen sizes, interaction modes, platforms, and media]
(https://www.w3.org/2001/tag/doc/ethical-web-principles/#multi).</p>
   <p>One of the main values of the Web is that it’s extremely flexible:
a Web page may be viewed on virtually any consumer computing device
at a very wide range of screen sizes,
may be used to generate printed media,
and may be interacted with in a large number of different ways.
New features should match the <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#render">existing flexibility</a> of the web platform.</p>
   <div role="note"><p>
     This doesn’t imply that features which don’t work in <em>every</em> possible context should be excluded.
For example, hyperlinks can’t be visited when printed on paper,
and the <span>click</span> event doesn’t translate perfectly to touch input devices
where positioning and clicking the pointer occur in the same gesture (a "tap"). 
    </p><p>These features still work across a wide variety of contexts,
and can be adapted to devices that don’t support their original intent -
for example, a tap on a mobile device will fire a <span>click</span> event as a fallback.</p>
   </div>
   <p>Features should also be designed so that the easiest way to use them
maintains flexibility.</p>
   <p><a href="#example-f162158a"></a> The 'display: block',
'display: flex',
and 'display: grid' layout models in CSS
all default to placing content within the available space and without overlap,
so that it works across screen sizes,
and allows users to choose their own font and font size without causing text to overflow. </p>
   <h2 data-level="2" id="api-across-languages"><span>2. </span><span>API Design Across Languages</span><a href="#api-across-languages"></a></h2>
   <h3 data-level="2.1" id="simplicity"><span>2.1. </span><span>Prefer simple solutions</span><a href="#simplicity"></a></h3>
   <p>Look hard for simple solutions to the <a href="#priority-of-constituencies">user needs</a> you intend to address.</p>
   <p>Simple solutions are generally better than complex solutions,
although they may be harder to find.
Simpler features are easier for user agents to implement and test,
more likely to be interoperable,
and easier for authors to understand.
It is especially important to design your feature so that 
the most common use cases are easy to accomplish.</p>
   <p>Make sure that your <a href="#priority-of-constituencies">user needs</a> are well-defined.
This allows you to avoid scope creep,
and make sure that your API does actually meet the needs of all users.
Of course,
complex or rare use cases are also worth solving,
though their solutions may be more complicated to use.
As Alan Kay said,
"simple things should be simple, complex things should be possible."</p>
   <p>Do note however that while common cases are often simple,
commonality and complexity are not always correlated.</p>
   <p><a href="#example-b89cef20"></a> Sanitizing HTML to prevent XSS attacks is a complex process
that requires extensive security knowledge,
however the <a href="https://wicg.github.io/sanitizer-api/">Sanitizer API</a> provides a shortcut for this common use case. 
It also permits simpler types of filtering, but with more configuration. </p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="biblio" href="#biblio-least-power">[LEAST-POWER]</a></p>
   </li></ul>
   <h3 data-level="2.2" id="high-level-low-level"><span>2.2. </span><span>Resolving tension between high level and low level APIs</span><a href="#high-level-low-level"></a></h3>
   <p>High-level APIs allow user agents more ability to
intervene in various ways <a href="#priority-of-constituencies">on behalf of the user</a>,
such as to ensure accessibility, privacy, or usability.</p>
   <div id="font-enumeration">
    <p>A font picker (high level API) <a href="https://github.com/w3ctag/design-reviews/issues/399">was recommended by the TAG</a> over a Font Enumeration API (low level API)
as it addresses the bulk of use cases,
while preserving user privacy,
as it is free from the the fingerprinting concerns that accompany
a general Font Enumeration API.
A native font picker also comes with accessibility built-in,
and provides consistency for end users.</p>
   </div>
   <p>Low-level APIs afford authors room for experimentation
so that high level APIs can organically emerge
from usage patterns over time.
They also provide an escape hatch when the higher-level API
is not adequate for the use case at hand.</p>
   <p>Lower level building blocks cannot always be exposed as Web APIs.
A few possible reasons for this are
to preserve the user’s security and privacy,
or to avoid tying Web APIs to specific hardware implementations.
However, high level APIs should be designed in terms of
building blocks over lower level APIs
whenever possible.
This may guide decisions on how high level the API needs to be.</p>
   <p>A well-layered solution should ensure continuity
of the ease-of-use vs power tradeoff curve
and avoid sharp cliffs
where a small amount of incremental use case complexity
results in a large increase of code complexity.</p>
   <h3 data-level="2.3" id="name-thoughtfully"><span>2.3. </span><span>Name things thoughtfully</span><a href="#name-thoughtfully"></a></h3>
   <p>Name APIs with care.
Naming APIs well makes it much easier for authors to use them correctly.</p>
   <p>See the more detailed <a href="#naming-is-hard">Naming principles</a> section
for specific guidance on naming.</p>
   <h3 data-level="2.4" id="consistency"><span>2.4. </span><span>Consistency</span><a href="#consistency"></a></h3>
   <p>It is good practice to consider precedent in the design of your API
and to try to be consistent with it.</p>
   <p>There is often a tension between API ergonomics and consistency,
when existing precedent is of poor usability.
In some cases it makes sense to break consistency to improve usability,
but the improvement should be very significant to justify this.</p>
   <p>Since the web platform has gradually evolved over time,
there are often multiple conflicting precedents
which are mutually exclusive.
You can weigh which precdent to follow by taking into account
prevalence (all else being equal, follow the more popular precedent),
API ergonomics (all else being equal, follow the more usable precedent),
and API age (all else being equal, follow the newer precedent).</p>
   <p>There is often a tension between internal and external consistency. <em>Internal consistency</em> is consistency with the rest of the system,
whereas <em>external consistency</em> is consistency with the rest of the world.
In the web platform, that might materialize in three layers:
consistency within the technology the API belongs to (e.g. CSS),
consistency with the rest of the web platform,
and in some cases external precedent,
when the API relates to a particular specialized outside domain.
In those cases, it is useful to consider what the majority of users will be.
Since for most APIs the target user is someone who is familiar with the
technology they are defined in,
err on the side of favoring consistency with that.</p>
   <p><a href="#example-10a5f89c"></a> One example is <a href="https://www.w3.org/TR/css-color-4/#funcdef-lab">Lab colors</a>:
It would be more consistent with the rest of CSS to use percentages for L (0%-100%),
but more consistent with the rest of Color Science to use a unitless number (0-100).
There was a lot of heated debate,
which resolved in favor of percentages,
i.e. consistency within CSS. </p>
   <p>There is also a separate section on <a href="#naming-consistency">naming consistency</a>.</p>
   <h3 data-level="2.5" id="feature-detect"><span>2.5. </span><span>New features should be detectable</span><a href="#feature-detect"></a></h3>
   <p>Provide a way for authors to programmatically detect
whether your feature is available,
so that web content may gracefully handle the feature not being present.</p>
   <p>An existing feature may not be available on a page for a number of reasons.
Two of the more common reasons are
because it hasn’t been implemented yet, or
because it’s only available in <a href="#secure-context">secure contexts</a>.</p>
   <p>Authors shouldn’t need to write different code to handle each scenario.
That way, even if an author only knows or cares about one scenario,
the code will handle all of them.</p>
   <p role="note"> When a feature is available but isn’t feasible to use
because a required device isn’t present,
it’s better to expose that the feature is available
and have a separate way to detect that the device isn’t.
This allows authors to handle a device not being available differently
from the feature not being available,
for example by suggesting the user connect or enable the device. </p>
   <p>See <a href="#device-enumeration">§ 9.2 Use care when exposing APIs for selecting or enumerating devices</a>.</p>
   
   <p>Authors should always be able to detect a feature from JavaScript,
and in some cases the feature should also be detectable
in the language where it’s used
(such as <a data-link-type="maybe" href="https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports" id="ref-for-at-ruledef-supports">@supports</a> in CSS).</p>
   <p>In some cases, it may <strong>not</strong> be appropriate to allow feature detection.
Whether the feature should be detectable or not
should be based on the <a href="#priority-of-constituencies">user need</a> for the feature:
if there is a user need or design principle which would fail
if feature detection were available for the feature,
then you should not support feature detection.</p>
   <p>Also, if a feature is generally not exposed to developers,
it is not appropriate to support feature detection.
For example, private browsing mode is a concept
which is recognised in web specifications,
but not exposed to authors.
For private browsing mode to support the user’s needs,
it must not be feature detected.</p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="#do-not-expose-use-of-private-browsing-mode">§ 2.7 Don’t reveal that private browsing mode is engaged</a></p>
    </li><li data-md="">
     <p><a href="#do-not-expose-use-of-assistive-tech">§ 2.9 Don’t reveal that assistive technologies are being used</a></p>
    </li><li data-md="">
     <p><a href="#secure-context">§ 2.6 Consider limiting new features to secure contexts</a></p>
   </li></ul>
   <h3 data-level="2.6" id="secure-context"><span>2.6. </span><span>Consider limiting new features to secure contexts</span><a href="#secure-context"></a></h3>
   <p>Always limit your feature to secure contexts
if it would pose a risk to the user
without the authentication, integrity, or confidentiality
that’s present only in secure contexts.</p>
   <p><a href="#example-ba6f372c"></a> One example of a feature that should be limited to secure contexts
is <a href="https://www.w3.org/TR/geolocation-API/">Geolocation</a>,
since it would be a risk to users' privacy to transmit their location in an insecure way. </p>
   <p>For other features, TAG members past and present
haven’t reached consensus on general advice.
Some believe that all new features
(other than features which are additions to existing features)
should be limited to secure contexts.
This would help encourage the use of HTTPS,
helping users be more secure in general.</p>
   <p>Others believe that features should only be limited to secure contexts
if they have a known security or privacy impact.
This lowers the barrier to entry for creating web pages
that take advantage of new features which don’t impact user security or privacy.</p>
   <div role="note"><p>
     Specification authors can limit most features defined in <a href="https://heycam.github.io/webidl/">Web IDL</a>,
to secure contexts
by using the
[<code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext">SecureContext</a></code>] extended attribute
on interfaces, namespaces, or their members (such as methods and attributes). 
    </p><p>However, for some types of API (e.g., dispatching an event),
limitation to secure contexts should just
be defined in normative prose in the specification.
If this is the case,
consider whether there might be scope for adding a similar mechanism
to [<code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①">SecureContext</a></code>]
to make this process easier for future API developers.</p>
   </div>
   <div role="note"><p>
     As described in <a href="#feature-detect">§ 2.5 New features should be detectable</a>,
you should provide a way to programmatically detect whether a feature is available,
including cases where the feature is unavailable because the context isn’t secure. 
    </p><p>However, if, for some reason
there is no way for code to gracefully handle the feature not being present,
limiting the feature to secure contexts might cause problems
for code (such as libraries) that may be used in either secure or non-secure contexts.</p>
   </div>
   <h3 data-level="2.7" id="do-not-expose-use-of-private-browsing-mode"><span>2.7. </span><span>Don’t reveal that private browsing mode is engaged</span><a href="#do-not-expose-use-of-private-browsing-mode"></a></h3>
   <p>Make sure that your feature doesn’t give authors a way to detect private browsing mode.</p>
   <p>Some people use <a href="https://www.w3.org/2001/tag/doc/private-browsing-modes/">private browsing mode</a> to protect their own personal safety.
Because of this, the fact that someone is using private browsing mode
may be <a href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">sensitive information</a> about them.
This information may <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#noharm">harm</a> people
if it is revealed to a web site controlled by others who have power over them
(such as employers, parents, partners,
or <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#expression">state actors</a>).</p>
   <p>Given such dangers,
websites should not be able to detect that private browsing mode is engaged.</p>
   <p><a href="#example-52cad010"></a> User Agents which support <a href="https://www.w3.org/TR/IndexedDB/">IndexedDB</a> should not disable it in private browsing mode,
because that would reveal that private browsing mode is engaged </p>
   
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#privacy">Security and privacy are essential</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#underlying-platform-data">What data does this specification expose to an origin?</a></p>
    </li><li data-md="">
     <p><a href="#private-browsing-mode">§ 2.8 Consider how your API should behave in private browsing mode</a></p>
   </li></ul>
   <h3 data-level="2.8" id="private-browsing-mode"><span>2.8. </span><span>Consider how your API should behave in private browsing mode</span><a href="#private-browsing-mode"></a></h3>
   <p>If necessary, specify how your API should behave differently
in private browsing mode.</p>
   <p>For example, if your API would reveal information
that would allow someone to correlate
a single user’s activity
both in and out of private browsing mode,
consider possible <a href="https://www.w3.org/TR/security-privacy-questionnaire/#mitigations">mitigations</a> such as introducing noise,
or using permission prompts to give the user extra information
to help them meaningfully consent to this tracking (see <a href="#consent">§ 1.4 Ask users for meaningful consent when appropriate</a>).</p>
   <p>Private browsing modes enable users to browse the web
without leaving any trace of their private browsing on their device.
Therefore, APIs which provide client-side storage
should not persist data stored
while private browsing mode is engaged
after it’s disengaged.
This can and should be done
without revealing any detectable API differences to the site.</p>
   <div id="example-fb11a26c">
    <p><a href="#example-fb11a26c"></a> User Agents which support <a href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage">localStorage</a> should not persist storage area changes
made while private browsing mode is engaged. 
    </p><p>If the User Agent has two simultaneous sessions with a site,
one in private browsing mode and one not,
storage area changes made in the private browsing mode session
should not be revealed to the other browsing session,
and vice versa.
(The <a href="https://html.spec.whatwg.org/multipage/indices.html#event-storage">storage event</a> should not be fired
at the other session’s <a href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="termref-for-window">window object</a>.)</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="#do-not-expose-use-of-private-browsing-mode">§ 2.7 Don’t reveal that private browsing mode is engaged</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#persistent-origin-specific-state">Does this specification introduce new state for an origin that persists across browsing sessions?</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#private-browsing">Security and privacy self review: Private Browsing</a></p>
   </li></ul>
   <h3 data-level="2.9" id="do-not-expose-use-of-assistive-tech"><span>2.9. </span><span>Don’t reveal that assistive technologies are being used</span><a href="#do-not-expose-use-of-assistive-tech"></a></h3>
   <p>Make sure that your API doesn’t provide a way
for authors to detect that a user is using assistive technology
without the user’s consent.</p>
   <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#allpeople">The web platform must be accessible to people with disabilities.</a> If a site can detect that a user is using an assistive technology,
that site can deny or restrict the user’s access to the services it provides.</p>
   <p>People who make use of assistive technologies
are often <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#noharm">vulnerable members of society</a>;
their use of assistive technologies is <a href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">sensitive information</a> about them.
If an API provides access to this information
without the user’s <a href="#consent">consent</a>,
this sensitive information may be revealed to others
(including <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#expression">state actors</a>)
who may wish them harm.</p>
   <p>Sometimes people propose features which aim to improve the user experience
for users of assistive technology,
but which would reveal the user’s use of assistive technology as a side effect.
While these are well intentioned,
they violate <a href="#safe-to-browse">§ 1.2 It should be safe to visit a web page</a>,
so alternative solutions must be found.</p>
   
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://w3c.github.io/apa/fast/">Web Technology Accessibility Guidelines</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#privacy">Security and privacy are essential</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#underlying-platform-data">What data does this specification expose to an origin?</a></p>
   </li></ul>
   <h3 data-level="2.10" id="support-non-fully-active"><span>2.10. </span><span>Support non-"fully active" documents</span><a href="#support-non-fully-active"></a></h3>
   <p>After a user navigated away from a document,
the document might be cached in a non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active">fully active</a> state,
and might be reused when the user navigates back to the entry holding the document, which makes navigation fast for users.
In browsers, this is known as the back/forward cache, or "<abbr title="back/forward cache">BFCache</abbr>" for short.
In the past, many APIs have missed specifying support for non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①">fully active</a> documents,
making them hard to support in various user agents to cache pages in the BFCache, effectively making the user experience of navigating back and forth less optimal.</p>
   <p>To avoid this happening with your API,
you should specify support for non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②">fully active</a> documents by following these guidelines:</p>
   <p role="note"><span>Note:</span> It is possible for a document to not become <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③">fully active</a> for other reasons not related to
caching, such as when the iframe holding the document gets detached.
Some advices below might not be relevant for those cases,
since the document will never return to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active④">fully active</a> again.</p>
   <h4 data-level="2.10.1" id="gate-fully-active"><span>2.10.1. </span><span>Gate actions with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑤">fully active</a> checks</span><a href="#gate-fully-active"></a></h4>
   <p>When performing actions that might update the state of a document,
be aware that the document might not be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑥">fully active</a> and is considered as "non-existent" from the user’s perspective.
This means they should not receive updates or perform actions.</p>
   <p role="note"><span>Note:</span> It is possible for a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑦">fully active</a> document to be perceived as "non-existent" by users,
such as when the document is <a href="https://jeremyroman.github.io/alternate-loading-modes/">displaying prerendered content</a>.
These documents might behave differently than non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑧">fully active</a> documents,
and the guidelines here might not be applicable to them,
as it is written only for handling non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑨">fully active</a> documents.</p>
   <p>In many cases,
anything that happens while the document is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⓪">fully active</a> should be treated as if it never happened.
If it makes more sense to "update" a document to ensure it does not hold  stale information
after it becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①①">fully active</a> again, consider the <a href="#listen-fully-active">§ 2.10.2 Listen for changes to fully active status</a> pattern below.</p>
   <p><a href="#example-86baec91"></a> APIs that periodically send information updates,
  such as Geolocation API’s <code><a data-link-type="idl">watchPosition()</a></code> should not send updates if the document is no longer fully active.
  They also should not queue those updates to arrive later,
  and only resume sending updates when the document becomes active again,
  possibly sending one update with the latest information then. </p>
   <h4 data-level="2.10.2" id="listen-fully-active"><span>2.10.2. </span><span>Listen for changes to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①②">fully active</a> status</span><a href="#listen-fully-active"></a></h4>
   <p>When a document goes from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①③">fully active</a> to non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①④">fully active</a>,
it should be treated similarly to the way discarded documents are treated.
The document must not retain exclusive access to shared resources
and must ensure that no new requests are issued
and that connections that allow for new incoming requests are terminated.
When a document goes from non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⑤">fully active</a> to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⑥">fully active</a> again,
it can restore connections if appropriate.</p>
   <p>While web authors can manually do cleanup (e.g. release the resources, sever connections)
from within the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagehide" id="ref-for-event-pagehide">pagehide</a></code> event and restore them from the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageshow" id="ref-for-event-pageshow">pageshow</a></code> event themselves,
doing this automatically from the API design allows the document to be kept alive after navigation by default,
and is more likely to lead to well-functioning web applications.</p>
   <p><a href="#example-76ebae04"></a> APIs that create live connections can pause/close the connection and possibly resume/reopen it later.
  It’s also possible to let the connection stay open to complete existing ongoing requests,
  and later update the document with the result when it gets restored, if appropriate (e.g.
  resource loads). </p>
   <p><a href="#example-1dfbe459"></a> APIs that hold non-exclusive resources
  may be able to release the resource when the document becomes not fully active,
  and re-acquire them when it becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⑦">fully active</a> again
  (Screen Wake Lock API is already <a href="https://w3c.github.io/screen-wake-lock/#handling-document-loss-of-full-activity">doing</a> the first part). </p>
   <p role="note"><span>Note:</span> this might not be appropriate for all types of resources,
e.g. if an exclusive lock is held,
we cannot just release it and reacquire when <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⑧">fully active</a> since another page could then take that lock.
If there is an API to signal to the page that this has happened,
it may be acceptable but beware that if the only time this happens is with BFCache,
then it’s likely many pages are not prepared for it. If it is not possible to support BFCache,
follow the <a href="#discard">§ 2.10.4 Discard non-fully active documents for situations that can’t be supported</a> pattern described below.</p>
   <p>Additionally, when a document becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⑨">fully active</a> again,
it can be useful to update it with the current state of the world,
if anything has changed while it is in the non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②⓪">fully active</a> state.
However, care needs to be taken with events that occurred while in the BFCache.
When not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②①">fully active</a>, for some cases, all events should be dropped,
in some the latest state should be delivered in a single event,
in others it may be appropriate to queue events or deliver a combined event.
The correct approach is case by case and should consider privacy,
correctness, performance and ergonomics.</p>
   <p role="note"><span>Note:</span> Making sure the latest state is sent to a document that becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②②">fully active</a> again is especially important when retrofitting existing APIs.
This is because current users of these APIs expect to always have the latest information.
Dropping state updates can leave the document with stale information,
which can lead to unexpected and hard-to-detect breakage of existing sites.</p>
   <p><a href="#example-32a4ab83"></a> The <code><a data-link-type="idl">gamepadconnected</a></code> event
  can be sent to a document that becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②③">fully active</a> again
  if a gamepad is connected while the document is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②④">fully active</a>.
  If the gamepad was repeatedly connected and disconnected,
  only the final connected event should be delivered.
  (This is not specified yet, see <a href="https://github.com/w3c/gamepad/issues/149">issue</a>) </p>
   <p><a href="#example-46b7099c"></a> For geolocation or other physical sensors,
  no information about what happened while not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②⑤">fully active</a> should be delivered.
  The events should simply resume from when the document became <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②⑥">fully active</a>.
  However, these APIs should check the state when the document becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②⑦">fully active</a> again,
  to determine if a status update should be sent (e.g. is the current location far away from the
  location when the document becomes not fully active?), to ensure the document has the latest
  information, as guaranteed by the API normally. </p>
   <p><a href="#example-3f8cc6e6"></a> For network connections or streams,
  the data received while not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②⑧">fully active</a> should be delivered only
  when the document becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②⑨">fully active</a> again,
  but whereas a stream might have created many events with a small amount of data each,
  it could be delivered as smaller number of events with more data in each. </p>
   <h4 data-level="2.10.3" id="omit-non-fully-active"><span>2.10.3. </span><span>Omit non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③⓪">fully active</a> documents from APIs that span multiple documents</span><a href="#omit-non-fully-active"></a></h4>
    Non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③①">fully active</a> documents should not be observable,
so APIs should treat them as if they no longer exist.
They should not be visible to the "outside world" through document-spanning APIs
(e.g. <code><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-clients-matchall" id="ref-for-dom-clients-matchall">clients.matchAll()</a></code>, <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/browsers.html#dom-opener" id="ref-for-dom-opener">window.opener</a></code>). 
   <p role="note"><span>Note:</span> This should be rare since cross-document-spanning APIs are themselves relatively rare.</p>
   
   
   <h4 data-level="2.10.4" id="discard"><span>2.10.4. </span><span>Discard non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③⑥">fully active</a> documents for situations that can’t be supported</span><a href="#discard"></a></h4>
    If supporting non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③⑦">fully active</a> documents is not possible for certain cases,
explicitly specify it by <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#discard-a-document" id="ref-for-discard-a-document">discarding the document|</a> if the situation happens after the user navigated away,
or setting the document’s <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#concept-document-salvageable">salvageable</a> bit to false if the situation happens before or during the navigation away from the document,
to cause it to be automatically discarded after navigation. 
   <p role="note"><span>Note:</span> this should be rare and probably should only be used when retrofitting old APIs,
as new APIs should always strive to work well with BFCache.</p>
   
   <p><a href="#example-47c778e3"></a> Calling <code><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-clients-claim" id="ref-for-dom-clients-claim">clients.claim()</a></code> should not wait for non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③⑧">fully active</a> clients,
  instead it should cause the non-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③⑨">fully active</a> client documents to be discarded.
  (This is currently not specified, see <a href="https://github.com/w3c/ServiceWorker/issues/1594">issue</a>) </p>
   <h4 data-level="2.10.5" id="per-document-state"><span>2.10.5. </span><span>Be aware that per-document state/data might persist after navigation</span><a href="#per-document-state"></a></h4>
    As a document might be reused even after navigation,
be aware that tying something to a document’s lifetime
also means reusing it after navigations.
If this is not desirable,
consider listening to changes to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active④⓪">fully active</a> state
and doing cleanup as necessary (see above). 
   <p><a href="#example-9be02aaf"></a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation" id="ref-for-sticky-activation">Sticky activation</a> is determined by the "last activation timestamp",
  which is tied to a document.
  This means after a user triggers activation once on a document,
  the document will have sticky activation forever,
  even after the user navigated away and back to it again.
  Whether this should actually be reset when full activity is lost or not
  is still <a href="https://github.com/whatwg/html/issues/6588">under discussion</a>. </p>
   <h3 data-level="2.11" id="third-party-tools"><span>2.11. </span><span>Prioritize usability over compatibility with third-party tools</span><a href="#third-party-tools"></a></h3>
   <p>Design new features with usability as the primary goal, and compatibility with third-party tooling as a secondary goal.</p>
   <p>The web platform benefits from a wide ecosystem of tooling
to facilitate easier and faster development.
A lot of the time, the syntax of an upcoming web platform feature
may conflict with that of a third-party tool causing breakage.
This is especially common as third-party tools are often used to prototype
new web platform features.</p>
   <p>In general, web platform features last a lot longer than most third-party tools,
and thus giving them the optimal syntax and functionality should be of high priority.</p>
   <p>In some cases, the conflict will introduce problems across a large number of
web sites, necessitating the feature’s syntax to be redesigned to avoid clashes.</p>
   <p><a href="#example-1e284310"></a> <code>Array.prototype.contains()</code> had to be renamed to <code>Array.prototype.includes()</code> to avoid clashes with
    the identically named but incompatible method from PrototypeJS,
    a library that was in use in millions of websites. </p>
   <p>However, these cases should be exceptions.</p>
   <p>When deciding whether to break third party tools with new syntax, there are several factors to consider,
such as severity of the breakage,
popularity of the third party tool,
and many more.</p>
   <p>Possibly the most important factor is how severely would the usability of the web platform feature be compromised
if its syntax was changed to avoid breaking the third party tool?
If several alternatives of similar usability are being considered,
it is usually preferable to prioritize the ones that inconvenience third party tools the least.</p>
   <p><a href="#example-4a031163"></a> When the CSS WG was designing <a data-link-type="biblio" href="#biblio-css-grid-1">CSS Grid Layout</a>,
square brackets were chosen instead of parentheses for naming grid tracks
to avoid breaking Sass, a popular preprocessor. </p>
   <p>However, if avoiding breaking the third party tool would lead to
a <em>significant</em> negative impact on of the feature’s usability,
that is rarely an acceptable tradeoff,
unless it causes significant breakage of live websites.</p>
   <p>Languages should also provide mechanisms for extensibility
that authors can use to extend the language
without breaking future native functionality,
to reduce such dilemmas in the future.</p>
   <h2 data-level="3" id="html"><span>3. </span><span>HTML</span><a href="#html"></a></h2>
   <p>This section details design principles for features which are exposed via HTML.</p>
   <h3 data-level="3.1" id="attribute-reuse"><span>3.1. </span><span>Re-use attribute names (only) for similar functionality</span><a href="#attribute-reuse"></a></h3>
   <p>If you are adding a feature that is specified through an HTML attribute,
check if there is an existing attribute name on another element
that specifies similar functionality.
Re-using an existing attribute name means authors can utilize existing knowledge,
maintains <a href="#consistency">consistency</a> across the language,
and keeps its vocabulary small.</p>
   <p><a href="#example-c1977603"></a> The same attribute name, <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/form-elements.html#attr-select-multiple" id="ref-for-attr-select-multiple">multiple</a></code>,
	is used on both <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element" id="ref-for-the-select-element">select</a></code> to allow selection of multiple values,
	as well as on <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element">input</a></code> to allow entry of multiple values. </p>
   <p><a href="#example-628fe6cf"></a> The <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#attr-details-open" id="ref-for-attr-details-open">open</a></code> attribute was introduced on the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-details-element" id="ref-for-the-details-element">details</a></code> element,
	and then re-used by <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element">dialog</a></code>. </p>
   <p>If you do re-use an existing attribute,
try to keep its syntax as close as possible to the syntax of the existing attribute.</p>
   <p><a href="#example-0e853da5"></a> The <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/forms.html#attr-label-for" id="ref-for-attr-label-for">for</a></code> attribute was introduced on the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-label-element" id="ref-for-the-label-element">label</a></code> element,
	for specifying which form element it should be associated with.
	It was later re-used by <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-output-element" id="ref-for-the-output-element">output</a></code>,
	for specifying which elements contributed
	input values to or otherwise affected the calculation.
	The syntax of the latter is broader:
	it accepts a space-separated list of ids,
	whereas the former only accepts one id.
	However, they both still conform to the same syntax,
	whereas e.g. if one of them accepted a list of ids,
	and the other one a selector, that would be an antipattern. </p>
   <p>The inverse also applies:
do <strong>not</strong> re-use an existing attribute name if
the functionality you are adding is <strong>not</strong> similar to that of the existing attribute.</p>
   <p><a href="#example-9866c588"></a> The <code>type</code> attribute is used on the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element①">input</a></code> and <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" id="ref-for-the-button-element">button</a></code> elements
    to further specialize the element type,
    whereas on every other element (e.g. <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element">link</a></code>, <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script">script</a></code>, <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-style-element" id="ref-for-the-style-element">style</a></code>)
    it specifies MIME type.
    This is an antipattern; one of these groups of attributes should have had a different name. </p>
   <h3 data-level="3.2" id="avoid-html-parser-blocking"><span>3.2. </span><span> Do not pause the HTML parser</span><a href="#avoid-html-parser-blocking"></a></h3>
   <p>Ensure that your design does not require HTML parser to pause to handle external resources.</p>
   <p>As a page parses,
the browser discovers assets that the page needs,
and figures out a priority in which they should be loaded in parallel.
Such parsing can be disrupted by a resource which blocks the discovery of subsequent resources.
At worst, it means the browser downloads items in series rather than parallel.
At best, it means the browser queues downloads based on speculative parsing,
which may turn out to be incorrect.</p>
   <p>Features that block the parser generally do so
because they want to feed additional content into the parser
before subsequent content.
This is the case of legacy <code>&lt;script src="…"&gt;</code> elements,
which can inject into the parser using <code>document.write(…)</code>.
Due to the performance issues above, new features must not do this.</p>
   <h3 data-level="3.3" id="avoid-render-blocking"><span>3.3. </span><span> Avoid features that block rendering</span><a href="#avoid-render-blocking"></a></h3>
   <p>Features that require resource loading or other operations before rendering the page,
often result in blank page (or the previous page). The result is a poor user experience.</p>
   <p>Consider adding such features only in cases when the overall user experience is improved.
A canonical example of this is blocking rendering in order to download and process a stylesheet. 
The alternative user experience is a flash of unstyled content, which is undesirable.</p>
   <h2 data-level="4" id="css"><span>4. </span><span>Cascading Style Sheets (CSS)</span><a href="#css"></a></h2>
   <p>This section details design principles for features which are exposed via CSS.</p>
   <h3 data-level="4.1" id="css-property-separation"><span>4.1. </span><span>Separate CSS properties based on what should cascade separately</span><a href="#css-property-separation"></a></h3>
   <p>Decide which values should be grouped together as CSS properties
and which should be separate properties
based on what makes sense to set independently.</p>
   <p><a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#cascade">CSS cascading</a> allows <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#declaration">declarations</a> from different rules or different style sheets
to override one another.
A set of values that should all be overridden together
should be grouped together in a single property so that they cascade together.
Likewise, values that should be able to be overridden independently
should be separate properties.</p>
   <div id="example-e15a5479">
    <p><a href="#example-e15a5479"></a>For example, the "size" and "sink" aspects of the <a data-link-type="property" href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter" id="ref-for-propdef-initial-letter">initial-letter</a> property
belong in a single property
because they are part of a single initial letter effect
(e.g., a drop cap, sunken cap, or raised cap). 
    </p><p>However, the <a data-link-type="property" href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align" id="ref-for-propdef-initial-letter-align">initial-letter-align</a> property should be separate because it
sets an alignment policy for all of these effects across the document
which is a general stylistic choice
and a function of the script (e.g., Latin, Cyrillic, Arabic) used in the document.</p>
   </div>
   <h3 data-level="4.2" id="css-inherited-or-not"><span>4.2. </span><span>Make appropriate choices for whether CSS properties are inherited</span><a href="#css-inherited-or-not"></a></h3>
   <p>Decide whether a property should be <a href="https://drafts.csswg.org/css-cascade-3/#inherited-property">inherited</a> based on whether the effect of the property should be overridden or added to
if set on an ancestor as well as a descendant.</p>
   <p>If setting the property on a descendant element needs to override (rather than add to)
the effect of setting it on an ancestor,
then the property should probably be inherited.</p>
   <p>If setting the property on a descendant element is a separate effect
that adds to setting it on an ancestor,
then the property should probably <strong>not</strong> be inherited.</p>
   <p>A specification of an non-inherited property requiring that the handling of an element
look at the value of that property on its ancestors (which may also be slow)
is a "code smell" that suggests that the property likely should have been inherited.
A specification of an inherited property requiring that the handling of an element
ignore the value of a property if it’s the same as the value on the parent element
is a "code smell" that suggests that the property likely should not have been inherited.</p>
   <p> If a property has an effect on text,
then it’s almost always true that
a descendant element needs to override (rather than add to)
the effect of setting it on an ancestor,
and the property should be inherited.
This is also needed to maintain the design principle that
inserting an unstyled inline element around a piece of text
doesn’t change the appearance of that text. </p>
   <div id="example-58897411">
    <p><a href="#example-58897411"></a> For example, the <a data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" id="ref-for-propdef-background-image">background-image</a> property is <strong>not</strong> inherited. 
    </p><p>If the <a data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" id="ref-for-propdef-background-image①">background-image</a> property had been inherited,
then the specification would have had to create a good bit of complexity
to avoid a partially-transparent image
being visibly repeated for each descendant element.
This complexity probably would have involved
behaving differently if the property had the same value on the parent element,
which is the "code smell" mentioned above that suggests
that a property likely should not have been inherited.</p>
   </div>
   <div id="example-51dea7ed">
    <p><a href="#example-51dea7ed"></a> Another example is the <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size">font-size</a> property, which <strong>is</strong> inherited.
It sets the size of the font used for the text in the element,
and continues to apply to any descendants that don’t
have a declaration setting <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size①">font-size</a> to a different value. 
    </p><p>If the <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size②">font-size</a> property were not inherited,
then it would probably have to have an initial value
that requires walking up the ancestor chain to find the nearest ancestor
that doesn’t have that value.
This is the "code smell" mentioned above that suggests
that a property likely should have been inherited.</p>
   </div>
   <h3 data-level="4.3" id="css-computed-value"><span>4.3. </span><span>Choose the computed value type based on how the property should inherit</span><a href="#css-computed-value"></a></h3>
   <p>Choose the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value">computed value</a> of a CSS property
based on how it will <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#inheritance" id="ref-for-inheritance">inherit</a>,
including how values where it depends on other properties should inherit.</p>
   <p>Inheritance means that
an element gets the same computed value for a property that its parent has.
This means that processing steps that happen before reaching the computed value
affect the value that is inherited,
and those that happen after (such as for the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#used-value" id="ref-for-used-value">used value</a>) do not.</p>
   
   <div id="example-bdfc8e34">
    <p><a href="#example-bdfc8e34"></a> For example, the <a data-link-type="property" href="https://drafts.csswg.org/css2/#propdef-line-height" id="ref-for-propdef-line-height">line-height</a> property may accept a <a data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value">&lt;number&gt;</a> value,
such as <a data-link-type="propdesc" href="https://drafts.csswg.org/css2/#propdef-line-height" id="ref-for-propdef-line-height①">line-height: 1.4</a>.
This value represents a multiple of the <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size③">font-size</a>,
so if the <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size④">font-size</a> is <span>20px</span>,
the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#actual-value" id="ref-for-actual-value">actual value</a> for the line height is <span>28px</span>. 
    </p><p>However, the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value②">computed value</a> in this case is the <a data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①">&lt;number&gt;</a> <span>1.4</span>,
not the <a data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value" title="Expands to: advance measure | cap | ch | cm | dvb | dvh | dvi | dvmax | dvmin | dvw | em | ex | ic | in | lh | lvb | lvh | lvi | lvmax | lvmin | lvw | mm | pc | pt | px | q | rcap | rch | rem | rex | ric | rlh | svb | svh | svi | svmax | svmin | svw | vb | vh | vi | vmax | vmin | vw">&lt;length&gt;</a> <span>28px</span>.
(The <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#used-value" id="ref-for-used-value①">used value</a> is <span>28px</span>.)</p>
    <p>The <a data-link-type="property" href="https://drafts.csswg.org/css2/#propdef-line-height" id="ref-for-propdef-line-height②">line-height</a> property can be inherited
into elements that have a different <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size⑤">font-size</a>,
and any property on those elements which depends on <a data-link-type="property" href="https://drafts.csswg.org/css2/#propdef-line-height" id="ref-for-propdef-line-height③">line-height</a> must take the relevant <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size⑥">font-size</a> into account,
rather than the <a data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size" id="ref-for-propdef-font-size⑦">font-size</a> for the element from which
the <a data-link-type="property" href="https://drafts.csswg.org/css2/#propdef-line-height" id="ref-for-propdef-line-height④">line-height</a> value was inherited.</p>
<pre><c- p="">&lt;</c-><c- f="">body</c-> <c- e="">style</c-><c- o="">=</c-><c- s="">"font-size: 20px; line-height: 1.4"</c-><c- p="">&gt;</c->

  <c- p="">&lt;</c-><c- f="">p</c-><c- p="">&gt;</c->This body text has a line height of 28px.<c- p="">&lt;/</c-><c- f="">p</c-><c- p="">&gt;</c->

  <c- p="">&lt;</c-><c- f="">h2</c-> <c- e="">style</c-><c- o="">=</c-><c- s="">"font-size: 200%"</c-><c- p="">&gt;</c->
    This heading has a line-height of 56px,
    not 28px, even though the line-height was declared on the body.
    This means that the 40px font won’t overflow the line height.
  <c- p="">&lt;/</c-><c- f="">h2</c-><c- p="">&gt;</c->
<c- p="">&lt;/</c-><c- f="">body</c-><c- p="">&gt;</c->
</pre>
    <p>These number values are generally the preferred values to use for <a data-link-type="property" href="https://drafts.csswg.org/css2/#propdef-line-height" id="ref-for-propdef-line-height⑤">line-height</a> because they inherit better than length values.</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://wiki.csswg.org/spec/computed-values">Computed Values Patterns</a></p>
   </li></ul>
   <h3 data-level="4.4" id="css-naming"><span>4.4. </span><span>Naming of CSS properties and values</span><a href="#css-naming"></a></h3>
   <p>The names of CSS properties are usually nouns,
and the names of their values are usually adjectives (although sometimes nouns).</p>
   <p>Words in properties and values are separated by hyphens.
Abbreviations are generally avoided.</p>
   <p>Use the root form of words when possible
rather than a form with a grammatical prefix or suffix
(for example, "size" rather than "sizing").</p>
   <p>The list of values of a property should generally be chosen
so that new values can be added.
Avoid values like <span>yes</span>, <span>no</span>, <a data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true" id="ref-for-valdef-custom-media-true">true</a>, <a data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false" id="ref-for-valdef-custom-media-false">false</a>,
or things with more complex names that are basically equivalent to them.</p>
   <p>Avoid words like "mode" or "state" in the names of properties,
since properties are generally setting a mode or state.</p>
   <p>See <a href="#naming-is-hard">§ 12 Naming principles</a> for general (cross-language) advice on naming.</p>
   <h3 data-level="4.5" id="css-content-should-be-visible"><span>4.5. </span><span>Content should be viewable and accessible by default</span><a href="#css-content-should-be-visible"></a></h3>
   <p>Design CSS properties or CSS layout systems (which are typically values of the <code>display</code> property),
to preserve the content as viewable, accessible and usable by default.</p>
   <p><a href="#example-c09bf2e2"></a> For example, the default behavior of all layout systems in CSS will not lead to content being clipped,
content overlapping other content, or content being unreachable by scrolling.
These things should only happen if CSS features are used that are more explicitly choosing
such a behavior (for example, <code>overflow: hidden</code> or <code>left: -40em</code>). They should not happen by
default as a result of something like <code>display: flex</code> or <code>position: relative</code>. </p>
   <h2 data-level="5" id="js"><span>5. </span><span>JavaScript Language</span><a href="#js"></a></h2>
   <h3 data-level="5.1" id="js-only"><span>5.1. </span><span>Web APIs are for JavaScript</span><a href="#js-only"></a></h3>
   <p>When designing imperative APIs for the Web,
use JavaScript.
In particular,
you can freely rely upon language-specific semantics and conventions,
with no need to keep things generalized.</p>
   <div id="example-1f61e97b">
    <p><a href="#example-1f61e97b"></a> For example,
the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define" id="ref-for-dom-customelementregistry-define">CustomElementRegistry.define()</a></code> method takes a reference to
a <a href="https://tc39.es/ecma262/#sec-static-semantics-constructormethod">Constructor Method</a>. 
    </p><p>This takes advantage of the relatively recent addition of classes to JavaScript,
and the fact that method references are very easy to use in JavaScript.</p>
   </div>
   <p> JavaScript is standardized under the name <a data-link-type="biblio" href="#biblio-ecmascript">[ECMASCRIPT]</a>. </p>
   <p><a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> defines a separate "ECMAScript binding" section,
but this doesn’t imply that Web IDL is intended
to have bindings in other programming languages. </p>
   <h3 data-level="5.2" id="js-rtc"><span>5.2. </span><span>Preserve run-to-completion semantics</span><a href="#js-rtc"></a></h3>
   <p>Don’t modify data accessed via JavaScript APIs
while a JavaScript <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a> is running.</p>
   <p>A JavaScript Web API is generally a wrapper around
a feature implemented in a lower-level language,
such as C++ or Rust.
Unlike those languages,
when using JavaScript developers can expect
that once a piece of code begins executing,
it will continue executing until it has completed.</p>
   <p>Because of that, JavaScript authors take for granted
that the data available to a function won’t change unexpectedly
while the function is running.</p>
   <p>So if a JavaScript Web API exposes some piece of data,
such as an object property,
the user agent must not update that data
while a JavaScript task is running.
Instead, if the underlying data changes, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">queue a task</a> to modify the exposed version of the data.</p>
   <p><a href="#example-3fb93c89"></a> If a JavaScript task has accessed the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-online" id="ref-for-dom-navigator-online">navigator.onLine</a></code> property,
and browser’s online status changes,
the property won’t be updated until the next task runs. </p>
   <h3 data-level="5.3" id="js-gc"><span>5.3. </span><span>Don’t expose garbage collection</span><a href="#js-gc"></a></h3>
   <p>Ensure your JavaScript Web APIs don’t provide a way
for an author to know the timing of garbage collection.</p>
   <p>The timing of garbage collection is different in different user agents,
and may change over time as user agents work on improving performance.
If an API exposes the timing of garbage collection,
it can cause programs to behave differently
in different contexts.
This means that authors need to write extra code to handle these differences.
It may also make it more difficult for user agents
to implement different garbage collection strategies,
if there is enough code which depends on timing working a particular way.</p>
   <p>This means that you shouldn’t expose any API that acts as a weak reference,
e.g. with a property that becomes <code><c- kc="">null</c-></code> once garbage collection runs.
Object and data lifetimes in JavaScript code should be predictable.</p>
   <div id="example-fecc1403">
    <p><a href="#example-fecc1403"></a> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname">getElementsByTagName</a></code> returns an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection">HTMLCollection</a></code> object,
which may be re-used if the method is called twice on the same Document object,
with the same tag name.
In practice,
this means that the same object will be returned
if and only if it has not been garbage collected.
This means that the behaviour is different depending on
the timing of garbage collection. 
    </p><p>If <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname①">getElementsByTagName</a></code> were designed today,
the advice to the designers would be
to either reliably reuse the output,
or to produce a new <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection①">HTMLCollection</a></code> each time it’s invoked.</p>
   </div>
   <p><code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname②">getElementsByTagName</a></code> gives no sign that
it may depend on the timing of garbage collection.
In contrast, APIs which are explicitly designed
to depend on garbage collection,
like <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-weak-ref-objects" id="ref-for-sec-weak-ref-objects">WeakRef</a></code> or <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-finalization-registry-objects" id="ref-for-sec-finalization-registry-objects">FinalizationRegistry</a></code>,
set accurate author expectations about
the interaction with garbage collection.</p>
   <h2 data-level="6" id="api-surface"><span>6. </span><span>JavaScript API Surface Concerns</span><a href="#api-surface"></a></h2>
   <h3 data-level="6.1" id="attributes-like-data"><span>6.1. </span><span>Attributes should behave like data properties</span><a href="#attributes-like-data"></a></h3>
   <p><a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> attributes should act like simple JavaScript object properties.</p>
   <p>In reality, IDL attributes are implemented as accessor properties
with separate getter and setter methods.
To make them act like JavaScript object properties:</p>
   <ul>
    <li data-md="">
     <p>Getters must not have any observable side effects.</p>
    </li><li data-md="">
     <p>Getters should not perform any complex operations.</p>
    </li><li data-md="">
     <p>Ensure that <code>obj<c- p="">.</c->attribute <c- o="">===</c-> obj<c- p="">.</c->attribute</code> is always true.
Don’t create a new value each time the getter is called.</p>
    </li><li data-md="">
     <p>If possible, ensure that given <code>obj<c- p="">.</c->attribute <c- o="">=</c-> x</code>, <code>obj<c- p="">.</c->attribute <c- o="">===</c-> x</code> is true.
(This may not be possible if some kind of conversion is necessary for <code>x</code>.)</p>
   </li></ul>
   <p>If you were thinking about using an attribute,
but it doesn’t behave this way,
you should probably use a method instead.</p>
   <p><a href="#example-92914693"></a> For example, <code><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-htmlelement-offsettop" id="ref-for-dom-htmlelement-offsettop">offsetTop</a></code> performs layout,
which can be complex and time-consuming.
It would have been better if this had been a method like <code><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect">getBoundingClientRect()</a></code>. </p>
   <h3 data-level="6.2" id="live-vs-static"><span>6.2. </span><span>Consider whether objects should be live or static</span><a href="#live-vs-static"></a></h3>
   <p>If an API gives access to an object
representing some internal state,
decide whether that object should continue to be updated as the state changes.</p>
   <p>An object which represents the current state at all times
is a <dfn data-dfn-type="dfn" data-export="" id="live-object">live object<a href="#live-object"></a></dfn>,
while an object which represents the state at the time it was created
is a <dfn data-dfn-type="dfn" data-export="" id="static-object">static object<a href="#static-object"></a></dfn>.</p>
   <h4 id="live-objects"><span>Live objects</span><a href="#live-objects"></a></h4>
   <p>If an object allows the author to change the internal state,
that object should be live.
For example, DOM <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>s are live objects,
to allow the author to make changes to the document
with an understanding of the current state.</p>
   <p>Properties of live objects may be computed as they are accessed,
instead of when the object is created.
This makes live objects sometimes a better choice
if the data needed is complex to compute,
since there is no need to compute all the data before the object is returned.</p>
   <p>A live object may also use less memory,
since there is no need to copy data to a static version.</p>
   <h4 id="static-objects"><span>Static objects</span><a href="#static-objects"></a></h4>
   <p>If an object represents a list that might change,
most often the object should be static.
This is so that code iterating over the list
doesn’t need to handle the possibility of the list changing in the middle.</p>
   <div id="example-05004f68">
    <p><a href="#example-05004f68"></a> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname③">getElementsByTagName</a></code> returns a live object which represents a list,
meaning that authors need to take care when iterating over its items: 
</p><pre><c- a="">let</c-> list <c- o="">=</c-> document<c- p="">.</c->getElementsByTagName<c- p="">(</c-><c- u="">"td"</c-><c- p="">);</c->

<c- k="">for</c-> <c- p="">(</c-><c- a="">let</c-> i <c- o="">=</c-> <c- mf="">0</c-><c- p="">;</c-> i <c- o="">&lt;</c-> list<c- p="">.</c->length<c- p="">;</c-> i<c- o="">++</c-><c- p="">)</c-> <c- p="">{</c->
    <c- a="">let</c-> td <c- o="">=</c-> list<c- p="">[</c->i<c- p="">];</c->
    <c- a="">let</c-> tr <c- o="">=</c-> document<c- p="">.</c->createElement<c- p="">(</c-><c- u="">"tr"</c-><c- p="">);</c->
    tr<c- p="">.</c->innerHTML <c- o="">=</c-> td<c- p="">.</c->outerHTML<c- p="">;</c->

    <c- c1="">// This has the side-effect of removing td from the list,</c->
    <c- c1="">// causing the iteration to become unpredictable.</c->
    td<c- p="">.</c->parentNode<c- p="">.</c->replaceChild<c- p="">(</c->tr<c- p="">,</c-> td<c- p="">);</c->
<c- p="">}</c->
</pre>
    <p>The choice to have <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall" id="ref-for-dom-parentnode-queryselectorall">querySelectorAll()</a></code> return static objects
was made after spec authors noticed that <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname④">getElementsByTagName</a></code> was causing problems.</p>
    <p><code><a data-link-type="idl" href="https://url.spec.whatwg.org/#urlsearchparams" id="ref-for-urlsearchparams">URLSearchParams</a></code> isn’t static,
even though it represents a list,
because it’s the way for authors to change the query string of a URL.</p>
   </div>
   <p role="note"><span>Note:</span> For <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-maplike" id="ref-for-dfn-maplike">maplike</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-setlike" id="ref-for-dfn-setlike">setlike</a> types,
this advice may not apply,
since these types were designed to behave well
when they change while being iterated.</p>
   <p>If it would not be possible to compute properties
at the time they are accessed,
a static object avoids having to keep the object updated
until it’s garbage collected,
even if it isn’t being used.</p>
   <p>If a static object represents some state which may change frequently,
it should be returned from a method,
rather than available as an attribute.</p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="#attributes-like-data">§ 6.1 Attributes should behave like data properties</a></p>
   </li></ul>
   <h3 data-level="6.3" id="attributes-vs-methods"><span>6.3. </span><span>Use attributes or methods appropriately</span><a href="#attributes-vs-methods"></a></h3>
   <p>Sometimes it is unclear
whether to use an attribute or a method.</p>
   <ul>
    <li data-md="">
     <p>Attribute getters must not have any (observable) side effects.
If you have expected side effects, use a method.</p>
    </li><li data-md="">
     <p>Attribute getters should not perform any blocking operations.
If a getter requires performing a blocking operation,
it should be a method.</p>
    </li><li data-md="">
     <p>If the underlying object has not changed,
attribute getters should return
the same object each time it is called.
This means <code>obj.attribute === obj.attribute</code> must always hold.
Returning a new value from an attribute getter
each time is not allowed.
If this does not hold, the getter should be a method.</p>
   </li></ul>
   <p role="note"><span>Note:</span> An antipattern example of a blocking operation is with getters like offsetTop performing layout.</p>
   <p>For attributes, whenever possible,
preserve values given to the setter
for return from the getter.
That is, given <code>obj.attribute = x</code>,
a subsequent <code>obj.attribute === x</code> should be true.
(This will not always be the case,
e.g., if a normalization or type conversion step is necessary,
but should be held as a goal for normal code paths.)</p>
   <p>The object you want to return may be <a href="#js-rtc">live or static</a>.
This means:</p>
   <ul>
    <li data-md="">
     <p>If live, then return the same object each time,
until a state change requires a different object to be returned.
This can be returned from either an attribute or a method.</p>
    </li><li data-md="">
     <p>If static, then return a new object each time.
In which case, this should be be a method.</p>
   </li></ul>
   <h3 data-level="6.4" id="prefer-dict-to-bool"><span>6.4. </span><span>Prefer dictionary arguments over primitive arguments</span><a href="#prefer-dict-to-bool"></a></h3>
   <p>API methods should generally use dictionary arguments
instead of a series of optional primitive arguments.</p>
   <p>This makes the code that calls the method much more readable.
It also makes the API more extensible in the future,
particularly if multiple arguments with the same type are needed.</p>
   <div id="example-148797d6">
    <p><a href="#example-148797d6"></a> For example, 
</p><pre><c- k="">new</c-> Event<c- p="">(</c-><c- u="">"example"</c-><c- p="">,</c->
          <c- p="">{</c-> bubbles<c- o="">:</c-> <c- kc="">true</c-><c- p="">,</c->
            cancelable<c- o="">:</c-> <c- kc="">false</c-><c- p="">})</c->
</pre>
    <p>is much more readable than</p>
<pre><c- k="">new</c-> Event<c- p="">(</c-><c- u="">"example"</c-><c- p="">,</c-> <c- kc="">true</c-><c- p="">,</c-> <c- kc="">false</c-><c- p="">)</c->
</pre>
    <p>Also,</p>
<pre>window<c- p="">.</c->scrollBy<c- p="">({</c-> left<c- o="">:</c-> <c- mf="">50</c-><c- p="">,</c-> top<c- o="">:</c-> <c- mf="">0</c-> <c- p="">})</c->
</pre>
    <p>is more readable than</p>
<pre>window<c- p="">.</c->scrollBy<c- p="">(</c-><c- mf="">50</c-><c- p="">,</c-> <c- mf="">0</c-><c- p="">)</c->
</pre>
   </div>
   <p>The dictionary itself should be an optional argument,
so that if the author is happy with all of the default options,
they can avoid passing an extra argument.</p>
   <div id="example-c7e8a584">
    <p><a href="#example-c7e8a584"></a> For example, 
</p><pre>element<c- p="">.</c->scrollIntoView<c- p="">(</c-><c- kc="">false</c-><c- p="">,</c-> <c- p="">{});</c->
</pre>
    <p>is equivalent to</p>
<pre>element<c- p="">.</c->scrollIntoView<c- p="">(</c-><c- kc="">false</c-><c- p="">);</c->
</pre>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://ariya.io/2011/08/hall-of-api-shame-boolean-trap">Hall of API Shame: Boolean Trap</a>.</p>
    </li><li data-md="">
     <p><a href="https://lists.w3.org/Archives/Public/public-script-coord/2013OctDec/0302.html">APIs that have boolean arguments defaulting to true</a></p>
    </li><li data-md="">
     <p><a href="#optional-parameters">§ 6.5 Make method arguments optional if possible</a></p>
    </li><li data-md="">
     <p><a href="#naming-optional-parameters">§ 6.6 Naming optional arguments</a></p>
   </li></ul>
   <h3 data-level="6.5" id="optional-parameters"><span>6.5. </span><span>Make method arguments optional if possible</span><a href="#optional-parameters"></a></h3>
   <p>If an argument for an API method has a reasonable default value,
make that argument optional and specify the default value.</p>
   <p><a href="#example-b823d8cb"></a> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener">addEventListener()</a></code> takes an optional boolean <code>useCapture</code> argument.
Thie defaults to <code>false</code>, meaning that
the event should be dispatched to the listener in the bubbling phase by default. </p>
   <p role="note"><span>Note:</span> Exceptions have been made for legacy interoperability reasons
(such as <code><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest" id="ref-for-xmlhttprequest">XMLHttpRequest</a></code>),
but this should be considered a design mistake rather than recommended practice.</p>
   <p>The API must be designed so that if an argument is left out,
the default value used is the same as
converting <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined">undefined</a></code> to the type of the argument.
For example, if a boolean argument isn’t set,
it must default to false.</p>
   <p>When deciding between different list data types for your API,
unless otherwise required, use the following list types:</p>
   <ul>
    <li data-md="">
     <p>Method list arguments should be of type <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#sequence-type" id="ref-for-sequence-type">sequence&lt;T&gt;</a></p>
    </li><li data-md="">
     <p>Method return values should be of type <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#sequence-type" id="ref-for-sequence-type①">sequence&lt;T&gt;</a></p>
    </li><li data-md="">
     <p>Attributes should be of type <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-observable-array-type" id="ref-for-dfn-observable-array-type">ObservableArray&lt;T&gt;</a></p>
   </li></ul>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="#prefer-dict-to-bool">§ 6.4 Prefer dictionary arguments over primitive arguments</a></p>
   </li></ul>
   <h3 data-level="6.6" id="naming-optional-parameters"><span>6.6. </span><span>Naming optional arguments</span><a href="#naming-optional-parameters"></a></h3>
   <p>Name optional arguments to make the default behavior obvious
without being named negatively.</p>
   <p>This applies whether they are provided in a <a href="#prefer-dict-to-bool">dictionary</a> or as <a href="#optional-parameters">single arguments</a>.</p>
   <div id="example-cc7dcba0">
    <p><a href="#example-cc7dcba0"></a> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener①">addEventListener()</a></code> takes an <code>options</code> object
which includes an option named <code>once</code>.
This indicates that the listener should <strong>not</strong> be invoked repeatedly. 
    </p><p>This option could have been named <code>repeat</code>,
but that would require the <a href="#optional-parameters">default</a> to be <code>true</code>.
Instead of naming it <code>noRepeat</code>,
the API authors named it <code>once</code>,
to reflect the default behaviour without using a negative.</p>
    <p>Other examples:</p>
    <ul>
     <li data-md="">
      <p><code>passive</code> rather than <code>active</code>, or</p>
     </li><li data-md="">
      <p><code>isolate</code> rather than <code>connect</code>, or</p>
     </li><li data-md="">
      <p><code>private</code> rather than <code>public</code></p>
    </li></ul>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="#naming-is-hard">§ 12 Naming principles</a></p>
   </li></ul>
   <h3 data-level="6.7" id="constructors"><span>6.7. </span><span>Classes should have constructors when possible</span><a href="#constructors"></a></h3>
   <p>Make sure that any class that’s part of your API has a constructor,
if appropriate.</p>
   <p>By default, <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> interfaces generate "non-constructible" classes:
trying to create instances of them using <code>new X()</code> will throw a <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>.
To make them constructible,
you can add appropriate <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-constructors" id="ref-for-idl-constructors">constructor operation</a> to your interface,
and defining the algorithm for creating new instances of your class.</p>
   <p>This allows JavaScript developers
to create instances of the class
for purposes such as testing, mocking,
or interfacing with third-party libraries which accept instances of that class.
It also gives authors the ability to create a subclass of the class,
which is otherwise prevented,
because of the way JavaScript handles subclasses.</p>
   <p>This won’t be appropriate in all cases.
For example:</p>
   <ul>
    <li data-md="">
     <p>Some objects represent access to privileged resources,
so they need to be constructed by factory methods
which can access those resources.</p>
    </li><li data-md="">
     <p>Some objects have very carefully controlled lifecycles,
so they need to be created and accessed through specific methods.</p>
    </li><li data-md="">
     <p>Some objects represent an abstract base class,
which shouldn’t be constructed,
and which authors should not be able to define subclasses for.</p>
   </li></ul>
   <p id="example-b036c85f"><a href="#example-b036c85f"></a> The <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code> class, and all its derived interfaces, are constructible.
This is useful when testing code which handles events:
an author can construct an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code> to pass to a method
which handles that type of event. </p>
   <p id="example-efe51367"><a href="#example-efe51367"></a> The <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window">Window</a></code> class isn’t constructible,
because creating a new window is a privileged operation
with significant side effects.
Instead, the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-open" id="ref-for-dom-open">window.open()</a></code> method
is used to create new windows. </p>
   <p id="example-c23596fe"><a href="#example-c23596fe"></a> The <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap" id="ref-for-imagebitmap">ImageBitmap</a></code> class isn’t constructible,
as it represents an immutable, ready-to-paint bitmap image,
and the process of getting it ready to paint must be done asynchronously.
Instead, the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap" id="ref-for-dom-createimagebitmap">createImageBitmap()</a></code> factory method is used to create it. </p>
   <p id="example-97798904"><a href="#example-97798904"></a> The <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist">DOMTokenList</a></code> class is, sadly, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27114">not constructible</a>.
This prevents the creation of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" id="ref-for-custom-element">custom elements</a> that expose their token list attributes as <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist①">DOMTokenList</a></code>s. </p>
   <div id="example-ebdfca9b">
    <p><a href="#example-ebdfca9b"></a> Several non-constructible classes,
like <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator">Navigator</a></code>, <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#history-3" id="ref-for-history-3">History</a></code>, or <code><a data-link-type="idl" href="https://w3c.github.io/webcrypto/#dfn-Crypto" id="ref-for-dfn-Crypto">Crypto</a></code>,
are non-constructible because they are singletons
representing access to per-window information.
In these cases, something like the Web IDL <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-namespace" id="ref-for-dfn-namespace">namespace</a> feature
might have been a better fit,
but these features were designed before namespaces,
and go beyond what is currently possible with namespaces. 
    </p><p>If your API requires this type of singleton,
consider using a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-namespace" id="ref-for-dfn-namespace①">namespace</a>,
and <a href="https://github.com/heycam/webidl/issues/new">File an issue on Web IDL</a> if there is some problem with using them.</p>
   </div>
   <p>Factory methods can complement constructors, but generally should not be used <em>instead</em> of them.
It may still be valuable to include factory methods
in addition to constructors, when they provide additional benefits.
A common such case is when an API includes base classes
and multiple specialized subclasses,
with a factory method
for creating the appropriate subclass based on the parameters passed.
Often the factory method is a static method on the
closest common base subclass of the returned result.</p>
   <p><a href="#example-071fec19"></a> The <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-createelement" id="ref-for-dom-document-createelement">createElement</a></code> method is an example of a
factory method that could not have been implemented as a constructor,
as its result can be any of a number of subclasses of <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>. </p>
   <p><a href="#example-3119992e"></a> The <code><a data-link-type="idl">initMouseEvent</a></code> factory method only creates <code><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#mouseevent" id="ref-for-mouseevent">MouseEvent</a></code> objects,
which were originally not constructible,
even though there was no technical reason against that.
Eventually it was deprecated, and the <code><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#mouseevent" id="ref-for-mouseevent①">MouseEvent</a></code> object was simply made constructible. </p>
   <h3 data-level="6.8" id="synchronous"><span>6.8. </span><span>Use synchronous when appropriate</span><a href="#synchronous"></a></h3>
   <p>Where possible, prefer synchronous APIs when designing a new API.
Synchronous APIs are simpler to use,
and need less infrastructure set-up (such as making functions <code>async</code>).</p>
   <p>An API should generally be synchronous if the following rules of thumb apply:</p>
   <ul>
    <li data-md="">
     <p>The API is not expected to ever be gated behind a permission prompt, or another dialog such as a device selector.</p>
    </li><li data-md="">
     <p>The API implementation will not be blocked by a lock, filesystem or network access, for example, inter-process communication.</p>
    </li><li data-md="">
     <p>The execution time is short and deterministic.</p>
   </li></ul>
   <h3 data-level="6.9" id="promises"><span>6.9. </span><span>Design asynchronous APIs using Promises</span><a href="#promises"></a></h3>
   <p>If an API method needs to be asynchronous, use Promises,
not callback functions.</p>
   <p>Using Promises consistently across the web platform
means that APIs are easier to use together,
such as by chaining promises.
Promise-using code also tends to be easier to understand
than code using callback functions.</p>
   <p>An API might need to be asynchronous if:</p>
   <ul>
    <li data-md="">
     <p>the user agent needs to prompt the user for <a href="#consent">permission</a>,</p>
    </li><li data-md="">
     <p>some information might need to be read from disk,
or requested from the network,</p>
    </li><li data-md="">
     <p>the user agent may need to do a significant amount of work on another thread,
or in another process, before returning the result.</p>
   </li></ul>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing Promise-Using Specifications</a></p>
   </li></ul>
   <h3 data-level="6.10" id="aborting"><span>6.10. </span><span>Cancel asynchronous APIs/operations using AbortSignal</span><a href="#aborting"></a></h3>
   <p>If an asynchronous method can be cancelled,
allow authors to pass in an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal">AbortSignal</a></code> as part of an options dictionary.</p>
   <div id="example-52de31d9">
    <pre><c- a="">const</c-> controller <c- o="">=</c-> <c- k="">new</c-> AbortController<c- p="">();</c->
<c- a="">const</c-> signal <c- o="">=</c-> controller<c- p="">.</c->signal<c- p="">;</c->
geolocation<c- p="">.</c->read<c- p="">({</c-> signal <c- p="">});</c->
</pre>
   </div>
   <p>Using <code>AbortSignal</code> consistently
as the way to cancel an asychronous operation
means that authors can write less complex code.</p>
   <p>For example, there’s a pattern of using a single <code>AbortSignal</code> for several ongoing operations,
and then using the corresponding <code>AbortController</code> to cancel all of the operations at once if necessary
(such as if the user presses "cancel",
or a single-page app navigation occurs.)</p>
   <p>Even if cancellation can’t be guaranteed,
you can still use an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller">AbortController</a></code>,
because a call to <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort" id="ref-for-dom-abortcontroller-abort">abort()</a></code> on <code>AbortController</code> is a request, rather than a guarantee.</p>
   <h3 data-level="6.11" id="string-constants"><span>6.11. </span><span>Use strings for constants and enums</span><a href="#string-constants"></a></h3>
   <p>If your API needs a constant, or a set of enumerated values,
use string values.</p>
   <p>Strings are easier for developers to inspect,
and in JavaScript engines there is no performance benefit
from using integers instead of strings.</p>
   <p>If you need to express a state which is a combination of properties,
which might be expressed as a bitmask in another language,
use a dictionary object instead.
This object can be passed around as easily as a single bitmask value.</p>
   <h3 data-level="6.12" id="properties-vs-methods"><span>6.12. </span><span>Properties vs. Methods</span><a href="#properties-vs-methods"></a></h3>
   <p>Sometimes it is unclear whether to use a property or a method.</p>
   <ul>
    <li data-md="">
     <p>Property getters must not have any (observable) side effects.
If you have expected side effects, use a method.</p>
    </li><li data-md="">
     <p>Property getters are expected to represent the state of a given object.
This means a getter should be able to efficiently return a value using the existing state.
If a getter does not satisfy this, it should be a method.
(A notable failure of the platform in this regard is getters like offsetTop performing layout; do not repeat this mistake.)</p>
    </li><li data-md="">
     <p>If the underlying object has not changed, property getters should return the same object each time it is called.
This means <code>obj.property === obj.property</code> must always hold.
Returning a new value from a property getter each time is not allowed.
If this does not hold, the getter should be a method.</p>
   </li></ul>
   <p>For properties, whenever possible, preserve values given to the setter for return from the getter. That is,
given <code>obj.property = x</code>, a subsequent <code>obj.property === x</code> should be true. (This will not always be the case, e.g., if a normalization or type conversion step is necessary, but should be held as a goal for normal code paths.)</p>
   <p>The object you want to return may be <a href="#live-vs-static">live or static</a>. This means:</p>
   <ul>
    <li data-md="">
     <p>If live, then return the same object each time, until a state change requires a different object to be returned.
This can be returned from either an property or a method.</p>
    </li><li data-md="">
     <p>If static, then return a new object each time.
In which case, this should be be a method.</p>
   </li></ul>
   <h2 data-level="7" id="event-design"><span>7. </span><span>Event Design</span><a href="#event-design"></a></h2>
   <h3 data-level="7.1" id="one-time-events"><span>7.1. </span><span>Use promises for one time events</span><a href="#one-time-events"></a></h3>
   <p>Follow the <a href="https://www.w3.org/2001/tag/doc/promises-guide#one-time-events">advice</a> in the <strong><a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing
Promise-Using Specifications</a></strong> guideline.</p>
   <h3 data-level="7.2" id="promises-and-events"><span>7.2. </span><span>Events should fire before Promises resolve</span><a href="#promises-and-events"></a></h3>
   <p>If a Promise-based asynchronous algorithm dispatches events,
it should dispatch them before the Promise resolves,
rather than after.</p>
   <p>This guarantees that once the Promise resolves,
all effects of the algorithm have been applied.
For example, if an author changes some state
in reaction to an event which the Promise dispatches,
they can be sure that all of the state is consistent if the Promise is resolved.</p>
   <h3 data-level="7.3" id="dont-invent-event-like"><span>7.3. </span><span>Don’t invent your own event listener-like infrastructure</span><a href="#dont-invent-event-like"></a></h3>
   <p>When creating an API which allows authors to start and stop a process which generates notifications,
use the existing event infrastructure to allow listening for the notifications.
Create separate API controls to start/stop the underlying process.</p>
   <div id="example-7b5eb345">
    <p><a href="#example-7b5eb345"></a> For example, the Web Bluetooth API provides a <code>startNotifications()</code> method
on the <code>BluetoothRemoteGATTCharacteristic</code> global object,
which adds the object to the "active notification context set". 
    </p><p>When the User Agent receives a notification from the Bluetooth device,
it fires an event at the <code>BluetoothRemoteGATTCharacteristic</code> objects
in the active notification context set.</p>
   </div>
   <p>See:</p>
   <ul>
    <li data-md="">
     <p><a href="#events-are-for-notification">§ 7.5 Events are for notification</a></p>
    </li><li data-md="">
     <p><a href="#events-vs-observers">§ 7.8 How to decide between Events and Observers</a></p>
    </li><li data-md="">
     <p><a href="#state-and-subclassing">§ 7.7 State and Event subclasses</a></p>
   </li></ul>
   <h3 data-level="7.4" id="always-add-event-handlers"><span>7.4. </span><span>Always add event handler attributes</span><a href="#always-add-event-handlers"></a></h3>
   <p>If your API adds a new event type,
add a corresponding <code>on<em>yourevent</em></code> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attribute</a> to the interface of any <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler">EventHandler</a></code> which may handle the new event.</p>
   <p>it’s important to continue to define event handler IDL attributes because:</p>
   <ul>
    <li data-md="">
     <p>they preserve consistency in the platform</p>
    </li><li data-md="">
     <p>they enable feature-detection for the supported events (see <a href="#feature-detect">§ 2.5 New features should be detectable</a>)</p>
   </li></ul>
   <p role="note"> For consistency, if the event needs to be handled by HTML and SVG elements,
add the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes①">event handler IDL attributes</a> on the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" id="ref-for-globaleventhandlers">GlobalEventHandlers</a></code> interface mixin,
instead of directly on the relevant element interface(s).
Similarly, add <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes②">event handler IDL attributes</a> to <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers" id="ref-for-windoweventhandlers">WindowEventHandlers</a></code> rather than <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window①">Window</a></code>. </p>
   <h3 data-level="7.5" id="events-are-for-notification"><span>7.5. </span><span>Events are for notification</span><a href="#events-are-for-notification"></a></h3>
   <p>Events shouldn’t be used to trigger changes,
only to deliver a notification that a change has already finished happening.</p>
   <div id="example-a13474fb">
    <p><a href="#example-a13474fb"></a> When a window is resized,
an event named <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#event-media-resize" id="ref-for-event-media-resize">resize</a></code> is fired at the <code>Window</code> object. 
    </p><p>It’s not possible to stop the resize from happening by intercepting the event.
Nor is it possible to fire a constructed <code>resize</code> event
to cause the window to change size.
The event can only notify the author that the resize has already happened.</p>
   </div>
   <h3 data-level="7.6" id="guard-against-recursion"><span>7.6. </span><span>Guard against potential recursion</span><a href="#guard-against-recursion"></a></h3>
   <p>If your API includes a long-running or complicated algorithm,
prevent calling into the algorithm if it’s already running.</p>
   <p>If an API method causes a long-running algorithm to begin,
you should use <a href="#events-are-for-notification">events</a> to notify user code of the progress of the algorithm.
However, the user code which handles the event may call the same API method,
causing the complex algorithm to run recursively.
The same event may be fired again,
causing the same event handler to be fired, and so on.</p>
   <p>To prevent this, make sure that any "recursive" call into the API method
simply returns immediately. This technique is "guarding" the algorithm.</p>
   <div id="example-32d23c03">
    <p><a href="#example-32d23c03"></a> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal①">AbortSignal</a></code>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add">add</a>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-remove">remove</a> and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort">signal abort</a> each begin with a check
of the signal’s <a data-link-type="dfn">aborted flag</a>.
If the flag is set, the rest of the algorithm doesn’t run. 
    </p><p>In this case, a lot of the important complexity is
in the algorithms run during the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort①">signal abort</a> steps.
These steps iterate through a collection of algorithms
which are managed by the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add①">add</a> and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-remove①">remove</a> methods.</p>
    <p>For example, the <a href="https://streams.spec.whatwg.org/#readable-stream-pipe-to">ReadableStreamPipeTo</a> definition <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add②">add</a>s an algorithm
into the <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal②">AbortSignal</a></code>'s set of algorithms to be run
when the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort②">signal abort</a> steps are triggered,
by calling <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort" id="ref-for-dom-abortcontroller-abort①">abort()</a></code> on the <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①">AbortController</a></code> associated with the signal.</p>
    <p>This algorithm is likely to resolve promises causing code to run,
which may include attempting to call any of the methods on <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal③">AbortSignal</a></code>.
Since <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort③">signal abort</a> involves iterating through the collection of algorithms,
it should not be possible to modify that collection while it’s running.</p>
    <p>And since <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort④">signal abort</a> would have triggered the code which caused
the recursive call back in to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort⑤">signal abort</a>,
it’s important to avoid running these steps again
if the signal is already in the process of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort⑥">signal abort</a> steps,
to avoid recursion.</p>
   </div>
   <p role="note"><span>Note:</span> A caution about early termination:
if the algorithm being terminated
would go on to ensure some critical state consistency,
be sure to also make the relevant adjustments in state
before early termination of the algorithm.
Not doing so can lead to inconsistent state
and end-user-visible bugs when implemented as-specified.</p>
   <p role="note"><span>Note:</span> Be cautious about throwing exceptions in early termination.
Keep in mind the scenario in which developers will be invoking the algorithm,
and whether they would reasonably expect to handle an exception
in this [perhaps rare] case.
For example, will this be the only exception in the algorithm?</p>
   <p>You won’t always be able to "guard" in this way.
For example, an algorithm may have too many entry-points to reliably check all of them.
If that’s the case,
another option is to defer calling the author code
to a later task or microtask.
This avoids a stack of recursion,
but can’t avoid the risk of an endless loop of follow-up tasks.</p>
   <p>Deferring an event is often specified as "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">queue a task</a> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">fire an event</a>...".</p>
   <p>You should always defer events
if the algorithm that triggers the event could be running
on a different thread or process.
In this case, deferral ensures the events
can be processed on the correct task in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" id="ref-for-task-queue">task queue</a>.</p>
   <p>Both the "guarding" and the "deferring" approach have trade-offs.</p>
   <p>"Guarding" an algorithm guarantees:</p>
   <ul>
    <li data-md="">
     <p>at the time events are fired,
there is no chance that the state may have changed
between the guarded algorithm ending and the event firing.</p>
    </li><li data-md="">
     <p>events fired during the algorithm,
such as events to notify user code of a state change made as part of the algorithm,
can be fired immediately,
notifying code of the change without needing to wait for the next task.</p>
    </li><li data-md="">
     <p>user code running in the event handler can observe relevant state directly
on the instance object they were fired on,
rather than needing to be given a copy of the relevant state with the event.</p>
   </li></ul>
   <p>If the events are deferred instead:</p>
   <ul>
    <li data-md="">
     <p>there is no guarantee that they will be first in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" id="ref-for-task-queue①">task queue</a> once the algorithm completes.</p>
    </li><li data-md="">
     <p>any other task may change the object’s state
you should include any state relevant to the event with the deferred event.</p>
     <ul>
      <li data-md="">
       <p><span>This usually involves a new subclass of <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event②">Event</a></code>,
with new attributes to hold the state.</span></p>
       <p>For example, the <code><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#progressevent" id="ref-for-progressevent">ProgressEvent</a></code> adds <code><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-progressevent-loaded" id="ref-for-dom-progressevent-loaded">loaded</a></code>, <code><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-progressevent-total" id="ref-for-dom-progressevent-total">total</a></code>, etc. attributes to hold the state.</p>
     </li></ul>
    </li><li data-md="">
     <p>if different parts of an algorithm need to coordinate,
you may need to define an explicit state machine (well-defined state transitions)
to ensure that when a deferred event fires,
the behavior of inspecting or changing state is well-defined.</p>
     <p><span>For example, in <a data-link-type="biblio" href="#biblio-payment-request">[payment-request]</a>,
the <code><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest">PaymentRequest</a></code>'s <a data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-state" id="ref-for-dfn-state">[[state]]</a> internal slot
explicitly tracks the object’s state
through its well-defined transitions.</span></p>
     <ul>
      <li data-md="">
       <p>These state transitions often use the guarding technique themselves,
 to ensure the state transitions happen appropriately.</p>
       <p>For example, in <a data-link-type="biblio" href="#biblio-payment-request">[payment-request]</a> note the guards used around the <a data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-state" id="ref-for-dfn-state①">[[state]]</a> internal slot,
 such as in the <code><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show">show()</a></code> algorithm.</p>
     </li></ul>
    </li><li data-md="">
     <p>if the deferred event doesn’t need extra state,
or a state machine,
this probably means that the event is just signalling the completion of the algorithm.
If this is true, the API should probably return a <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise">Promise</a></code> instead of firint the event.
See <a href="#one-time-events">§ 7.1 Use promises for one time events</a>.</p>
   </li></ul>
   <p role="note"><span>Note:</span> events that expose the possibility of recursion as described in this section
were sometimes called "synchronous events".
This terminology is discouraged
as it implies that it’s possible to dispatch an event asynchronously.
All events are dispatched synchronously.
What is more often implied by "asynchronous event" is to defer firing an event.</p>
   <h3 data-level="7.7" id="state-and-subclassing"><span>7.7. </span><span>State and <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event③">Event</a></code> subclasses</span><a href="#state-and-subclassing"></a></h3>
   <p>Where possible, use a plain <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event④">Event</a></code> with a specified <code>type</code>,
and capture any state information in the <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code> object.</p>
   <p>It’s usually not necessary to create new subclasses of <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑤">Event</a></code>.</p>
   <h3 data-level="7.8" id="events-vs-observers"><span>7.8. </span><span>How to decide between Events and Observers</span><a href="#events-vs-observers"></a></h3>
   <p>In general, use <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget">EventTarget</a></code> and notification <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑥">Event</a></code>s,
rather than an Observer pattern,
unless an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①">EventTarget</a></code> can’t work well for your feature.</p>
   <p>Using an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget②">EventTarget</a></code> ensures your feature benefits from
improvements to the shared base class,
such as the addition of the <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once" id="ref-for-dom-addeventlisteneroptions-once">once</a></code>.</p>
   <p>If using events causes problems,
such as unavoidable <a href="#guard-against-recursion">recursion</a>,
consider using an Observer pattern instead.</p>
   <p><code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver">MutationObserver</a></code>, <a href="https://w3c.github.io/IntersectionObserver">Intersection Observer</a>, <a href="https://drafts.csswg.org/resize-observer/#resize-observer-interface">Resize Observers</a>,
and <a href="https://github.com/WICG/indexed-db-observers">IndexedDB Observers</a> are all examples of an Observer pattern.</p>
   <div id="example-5d14c000">
    <p><a href="#example-5d14c000"></a> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver①">MutationObserver</a></code> replaced the deprecated <a href="https://www.w3.org/TR/DOM-Level-3-Events/#legacy-mutationevent-events">DOM Mutation Events</a> after developers <a href="https://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0779.html">noticed</a> that DOM Mutation Events 
    </p><ul>
     <li data-md="">
      <p>fire too often</p>
     </li><li data-md="">
      <p>don’t benefit from event propagation, which makes them too slow to be useful</p>
     </li><li data-md="">
      <p>cause <a href="#guard-against-recursion">recursion</a> which is too difficult to guard against.</p>
    </li></ul>
    <p>Mutation Observers:</p>
    <ul>
     <li data-md="">
      <p>can batch up mutations to be sent to observers
after mutations have finished being applied;</p>
     </li><li data-md="">
      <p>don’t need to go through event capture and bubbling phases;</p>
     </li><li data-md="">
      <p>provide a richer API for expressing what mutations have occurred.</p>
    </li></ul>
    <p role="note"><span>Note:</span> Events can also batch up notifications,
but DOM Mutation Events were not designed to do this.
Events don’t always need to participate in event propagation,
but events on DOM Nodes usually do.</p>
   </div>
   <p>The Observer pattern works like this:</p>
   <ul>
    <li data-md="">
     <p>Each instance of the Observer class
is constructed with a callback,
and optionally with some options to customize what should be observed.</p>
    </li><li data-md="">
     <p>Instances begin observing specific targets,
using a method named <code>observe()</code>,
which takes a reference to the target to be observed.
The options to customize what should be observed
may be provided here instead of to the constructor.
The callback provided in the constructor is invoked
when something interesting happens to those targets.</p>
    </li><li data-md="">
     <p>Callbacks receive <em>change records</em> as arguments.
These records contain the details
about the interesting thing that happened.
Multiple records can be delivered at once.</p>
    </li><li data-md="">
     <p>The author may stop observing by calling a method called <code>unobserve()</code> or <code>disconnect()</code> on the Observer instance.</p>
    </li><li data-md="">
     <p>Optionally, a method may be provided to immediately return records
for all observed-but-not-yet-delivered occurrences.</p>
   </li></ul>
   <div id="example-f8835767">
    <p><a href="#example-f8835767"></a> <a href="https://w3c.github.io/IntersectionObserver"><code>IntersectionObserver</code></a> may be used like this: 
</p><pre><c- a="">function</c-> checkElementStillVisible<c- p="">(</c->element<c- p="">,</c-> observer<c- p="">)</c-> <c- p="">{</c->
    <c- k="">delete</c-> element<c- p="">.</c->visibleTimeout<c- p="">;</c->

    <c- c1="">// Process any observations which may still be on the task queue</c->
    processChanges<c- p="">(</c->observer<c- p="">.</c->takeRecords<c- p="">());</c->

    <c- k="">if</c-> <c- p="">(</c-><c- t="">'isVisible'</c-> <c- k="">in</c-> element<c- p="">)</c-> <c- p="">{</c->
        <c- k="">delete</c-> element<c- p="">.</c->isVisible<c- p="">;</c->
        logAdImpressionToServer<c- p="">();</c->

        <c- c1="">// Stop observing this element</c->
        observer<c- p="">.</c->unobserve<c- p="">(</c->element<c- p="">);</c->
    <c- p="">}</c->
<c- p="">}</c->

<c- a="">function</c-> processChanges<c- p="">(</c->changes<c- p="">)</c-> <c- p="">{</c->
    changes<c- p="">.</c->forEach<c- p="">(</c-><c- a="">function</c-><c- p="">(</c->changeRecord<c- p="">)</c-> <c- p="">{</c->
        <c- a="">var</c-> element <c- o="">=</c-> changeRecord<c- p="">.</c->target<c- p="">;</c->
        element<c- p="">.</c->isVisible <c- o="">=</c-> isVisible<c- p="">(</c->changeRecord<c- p="">.</c->boundingClientRect<c- p="">,</c->
                                      changeRecord<c- p="">.</c->intersectionRect<c- p="">);</c->
        <c- k="">if</c-> <c- p="">(</c-><c- t="">'isVisible'</c-> <c- k="">in</c-> element<c- p="">)</c-> <c- p="">{</c->
            <c- c1="">// Element became visible</c->
            element<c- p="">.</c->visibleTimeout <c- o="">=</c-> setTimeout<c- p="">(()</c-> <c- p="">=&gt;</c-> <c- p="">{</c->
                checkElementStillVisible<c- p="">(</c->element<c- p="">,</c-> observer<c- p="">);</c->
            <c- p="">},</c-> <c- mf="">1000</c-><c- p="">);</c->
        <c- p="">}</c-> <c- k="">else</c-> <c- p="">{</c->
            <c- c1="">// Element became hidden</c->
            <c- k="">if</c-> <c- p="">(</c-><c- t="">'visibleTimeout'</c-> <c- k="">in</c-> element<c- p="">)</c-> <c- p="">{</c->
                clearTimeout<c- p="">(</c->element<c- p="">.</c->visibleTimeout<c- p="">);</c->
                <c- k="">delete</c-> element<c- p="">.</c->visibleTimeout<c- p="">;</c->
            <c- p="">}</c->
        <c- p="">}</c->
    <c- p="">});</c->
<c- p="">}</c->

<c- c1="">// Create IntersectionObserver with callback and options</c->
<c- a="">var</c-> observer <c- o="">=</c-> <c- k="">new</c-> IntersectionObserver<c- p="">(</c->processChanges<c- p="">,</c->
                                        <c- p="">{</c-> threshold<c- o="">:</c-> <c- p="">[</c-><c- mf="">0.5</c-><c- p="">]</c-> <c- p="">});</c->

<c- c1="">// Begin observing "ad" element</c->
<c- a="">var</c-> ad <c- o="">=</c-> document<c- p="">.</c->querySelector<c- p="">(</c-><c- t="">'#ad'</c-><c- p="">);</c->
observer<c- p="">.</c->observe<c- p="">(</c->ad<c- p="">);</c->
</pre>
    <p>(Example code adapted from <a href="https://github.com/w3c/IntersectionObserver/blob/master/explainer.md">the <code>IntersectionObserver</code> explainer</a>.)</p>
   </div>
   <p>To use the Observer pattern, you need to define:</p>
   <ol>
    <li data-md="">
     <p>the new Observer object type,</p>
    </li><li data-md="">
     <p>an object type for observation options, and</p>
    </li><li data-md="">
     <p>an object type for the records to be observed.</p>
   </li></ol>
   <p>The trade-off for this extra work is the following advantages:</p>
   <ul>
    <li data-md="">
     <p>Instances can be customized at observation time, or at creation time.
The constructor for an <code>Observer</code>,
or its <code>observe()</code> method,
can take options allowing authors to customize what is observed for each callback.
This isn’t possible with <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener②">addEventListener()</a></code>.</p>
    </li><li data-md="">
     <p>It’s easy to stop listening on multiple callbacks using the <code>disconnect()</code> or <code>unobserve()</code> method on the <code>Observer</code> object.</p>
    </li><li data-md="">
     <p>You have the option to provide a method like <code>takeRecords()</code>,
which immediately fetches the relevant data,
instead of waiting for an event to fire.</p>
    </li><li data-md="">
     <p>Because Observers are single-purpose, you don’t need to specify an event type.</p>
   </li></ul>
   <p><code>Observer</code>s and <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget③">EventTarget</a></code>s have these things in common:</p>
   <ul>
    <li data-md="">
     <p>Both can be customized at creation time.</p>
    </li><li data-md="">
     <p>Both can batch occurrences and deliver them at any time. <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget④">EventTarget</a></code>s don’t need to be synchronous;
they can use microtask timing, idle timing, animation-frame timing, etc.
You don’t need an <code>Observer</code> to get special timing or batching.</p>
    </li><li data-md="">
     <p>Neither <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑤">EventTarget</a></code>s nor <code>Observer</code>s need to participate in a DOM tree
(bubbling/capture and cancellation).
Most prominent <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑥">EventTarget</a></code>s are <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①">Node</a></code>s in the DOM tree,
but many other events are standalone;
for example, <code><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbdatabase" id="ref-for-idbdatabase">IDBDatabase</a></code> and <code><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget" id="ref-for-xmlhttprequesteventtarget">XMLHttpRequestEventTarget</a></code>.
Even when using <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②">Node</a></code>s,
your events may be designed to be non-bubbling and non-cancelable.</p>
   </li></ul>
   <div id="example-211011c7">
    <p><a href="#example-211011c7"></a> Here is an example of using a hypothetical version of <code><a data-link-type="idl" href="https://w3c.github.io/IntersectionObserver/#intersectionobserver" id="ref-for-intersectionobserver">IntersectionObserver</a></code> that’s an <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑦">EventTarget</a></code> subclass: 
</p><pre><c- a="">const</c-> io <c- o="">=</c-> <c- k="">new</c-> ETIntersectionObserver<c- p="">(</c->element<c- p="">,</c-> <c- p="">{</c-> root<c- p="">,</c-> rootMargin<c- p="">,</c-> threshold <c- p="">});</c->

<c- a="">function</c-> listener<c- p="">(</c->e<c- p="">)</c-> <c- p="">{</c->
    <c- k="">for</c-> <c- p="">(</c-><c- a="">const</c-> change <c- k="">of</c-> e<c- p="">.</c->changes<c- p="">)</c-> <c- p="">{</c->
        <c- c1="">// ...</c->
    <c- p="">}</c->
<c- p="">}</c->

io<c- p="">.</c->addEventListener<c- p="">(</c-><c- u="">"intersect"</c-><c- p="">,</c-> listener<c- p="">);</c->
io<c- p="">.</c->removeEventListener<c- p="">(</c-><c- u="">"intersect"</c-><c- p="">,</c-> listener<c- p="">);</c->
</pre>
    <p>Compared to the <code>Observer</code> version:</p>
    <ul>
     <li data-md="">
      <p>it’s more difficult to observe multiple elements with the same options;</p>
     </li><li data-md="">
      <p>there is no way to request data immediately;</p>
     </li><li data-md="">
      <p>it’s more work to remove multiple event listeners for the same event;</p>
     </li><li data-md="">
      <p>the author has to provide a redundant <code>"intersect"</code> event type.</p>
    </li></ul>
    <p>In common with the <code>Observer</code> version:</p>
    <ul>
     <li data-md="">
      <p>it can still do batching;</p>
     </li><li data-md="">
      <p>it has the same timing (based on the JavaScript event queue);</p>
     </li><li data-md="">
      <p>authors can still customize what to listen for; and</p>
     </li><li data-md="">
      <p>events don’t go through capture or bubbling.</p>
    </li></ul>
    <p>These aspects can be achieved with either design.</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="#events-are-for-notification">§ 7.5 Events are for notification</a></p>
    </li><li data-md="">
     <p><a href="#state-and-subclassing">§ 7.7 State and Event subclasses</a></p>
   </li></ul>
   <h2 data-level="8" id="types-and-units"><span>8. </span><span>Web IDL, Types, and Units</span><a href="#types-and-units"></a></h2>
   <h3 data-level="8.1" id="numeric-types"><span>8.1. </span><span>Use numeric types appropriately</span><a href="#numeric-types"></a></h3>
   <p>If an API you’re designing uses numbers,
use one of the following <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> numeric types,
unless there is a specific reason not to:</p>
   <dl>
    <dt data-md=""><code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double">unrestricted double</a></code>
    </dt><dd data-md="">
     <p>Any JavaScript number, including infinities and NaN</p>
    </dd><dt data-md=""><code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double">double</a></code>
    </dt><dd data-md="">
     <p>Any JavaScript number, excluding infinities and NaN</p>
    </dd><dt data-md="">[<code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange">EnforceRange</a></code>] <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-long-long" id="ref-for-idl-long-long">long long</a></code>
    </dt><dd data-md="">
     <p>Any JavaScript number from -2<sup>63</sup> to 2<sup>63</sup>,
 rounded to the nearest integer.
 If a number outside this range is given,
 the generated bindings will throw a <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>.</p>
    </dd><dt data-md="">[<code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange①">EnforceRange</a></code>] <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long">unsigned long long</a></code>
    </dt><dd data-md="">
     <p>Any JavaScript number from 0 to 2<sup>64</sup>,
 rounded to the nearest integer.
 If a number outside this range is given,
 the generated bindings will throw a <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>.</p>
   </dd></dl>
   <p>JavaScript has only one numeric type, <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-number-objects" id="ref-for-sec-number-objects">Number</a></code>:
IEEE 754 double-precision floating point, including ±0, ±Infinity, and NaN. <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> numeric types represent
rules for modifying any JavaScript number
to belong to a subset with particular properties.
These rules are run when a number is passed to the interface defined in IDL,
whether a method or a property setter.</p>
   <p>If you have extra rules which need to be applied to the number,
you can specify those in your algorithm.</p>
   <div role="note"><p>
     The <a href="https://heycam.github.io/webidl/#es-integer-types">WEBIDL rules</a> for converting a JavaScript number to a number with fewer bits,
such as an <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet">octet</a></code> (8 bits, in the range [0, 255]),
involves taking the modulo of the JavaScript number.
For example, to convert a JavaScript number value of 300
to an <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet①">octet</a></code>,
the bindings will first compute 300 modulo 255,
so the resulting number will be 45,
which might be surprising. 
    </p><p>Instead, you can use
[<code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange②">EnforceRange</a></code>] <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet②">octet</a></code> to throw a <code>TypeError</code> for values outside of the <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet③">octet</a></code> range,
or [<code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Clamp" id="ref-for-Clamp">Clamp</a></code>] <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet④">octet</a></code> to clamp values to the octet range (for example, converting 300 to 255).</p>
    <p>This also works for the other shorter types, such as <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-short" id="ref-for-idl-short">short</a></code> or <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long">long</a></code>.</p>
   </div>
   <p><code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-bigint" id="ref-for-idl-bigint">bigint</a></code> should be used only when values greater than 2<sup>53</sup> or less than -2<sup>53</sup> are expected.</p>
   <p>An API should not support both <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-bigint-objects" id="ref-for-sec-bigint-objects">BigInt</a></code> and <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-number-objects" id="ref-for-sec-number-objects①">Number</a></code> simultaneously,
either by supporting both types via polymorphism,
or by adding separate, otherwise identical APIs which take <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-bigint-objects" id="ref-for-sec-bigint-objects①">BigInt</a></code> and <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-number-objects" id="ref-for-sec-number-objects②">Number</a></code>.
This risks losing precision through implicit conversions,
which defeats the purpose of <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-bigint-objects" id="ref-for-sec-bigint-objects②">BigInt</a></code>.</p>
   <h3 data-level="8.2" id="idl-string-types"><span>8.2. </span><span>Represent strings appropriately</span><a href="#idl-string-types"></a></h3>
   <p>When designing a web platform feature which operates on <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">strings</a>,
use <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code> unless you have a specific reason not to.</p>
   <p>Most string operations don’t need
to interpret the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit" id="ref-for-code-unit">code units</a> inside of the string,
so <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①">DOMString</a></code> is the best choice.
In the specific cases explained below, it might be appropriate to use either <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString">USVString</a></code> or <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ByteString" id="ref-for-idl-ByteString">ByteString</a></code> instead. <a data-link-type="biblio" href="#biblio-infra">[INFRA]</a> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a></p>
   <p><code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①">USVString</a></code> is the Web IDL type that represents <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value-string" id="ref-for-scalar-value-string">scalar value strings</a>.
For strings whose most common algorithms operate on <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value" id="ref-for-scalar-value">scalar values</a> (such as <a data-link-type="abstract-op" href="https://url.spec.whatwg.org/#percent-encode" id="ref-for-percent-encode">percent-encoding</a>),
or for operations which can’t handle <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#surrogate" id="ref-for-surrogate">surrogates</a> in input
(such as APIs that pass strings through to native platform APIs), <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②">USVString</a></code> should be used.</p>
   <p id="example-fe96b598"><a href="#example-fe96b598"></a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflect">Reflecting IDL attributes</a> whose content attribute is defined to contain a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a> (such as <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" id="ref-for-attr-hyperlink-href">href</a></code>)
should use <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③">USVString</a></code>. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <p><code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ByteString" id="ref-for-idl-ByteString①">ByteString</a></code> should only be used for representing
data from protocols like HTTP
which don’t distinguish between bytes and strings.
It isn’t a general-purpose string type.
If you need to represent a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#sequence-type" id="ref-for-sequence-type②">sequence</a> of <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-byte" id="ref-for-idl-byte">bytes</a></code>,
use <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-Uint8Array" id="ref-for-idl-Uint8Array">Uint8Array</a></code>.</p>
   <h3 data-level="8.3" id="milliseconds"><span>8.3. </span><span>Use milliseconds for time measurement</span><a href="#milliseconds"></a></h3>
   <p>If you are designing an API that accepts a time measurement,
express the time measurement in milliseconds.</p>
   <p>Even if seconds (or some other time unit) are more natural in the domain of an API,
sticking with milliseconds ensures that APIs
are interoperable with one another.
This means that authors don’t need to convert values used in one API
to be used in another API,
or keep track of which time unit is needed where.</p>
   <p>This convention began with <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout" id="ref-for-dom-settimeout">setTimeout()</a></code> and the <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-date-objects" id="ref-for-sec-date-objects">Date</a></code> API,
and has been used since then.</p>
   <p role="note"><span>Note:</span> high-resolution time is usually represented as fractional milliseconds
using a floating point value,
not as an integer value of a smaller time unit like nanoseconds.</p>
   <h3 data-level="8.4" id="times-and-dates"><span>8.4. </span><span>Use the appropriate type to represent times and dates</span><a href="#times-and-dates"></a></h3>
   <p>When representing date-times on the platform, use the <code><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp">DOMHighResTimeStamp</a></code> type. <code><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp①">DOMHighResTimeStamp</a></code> allows comparison of timestamps,
regardless of the user’s time settings.</p>
   <p><code><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp②">DOMHighResTimeStamp</a></code> values represent
a time value in milliseconds.
See <a data-link-type="biblio" href="#biblio-highres-time">[HIGHRES-TIME]</a> for more details.</p>
   <p>Don’t use the JavaScript <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-date-objects" id="ref-for-sec-date-objects①">Date</a></code> class for representing
specific date-time values. <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-date-objects" id="ref-for-sec-date-objects②">Date</a></code> objects are mutable (may have their value changed),
and there is no way to make them immutable.</p>
   
   <h3 data-level="8.5" id="error-types"><span>8.5. </span><span>Use Error or DOMException for errors</span><a href="#error-types"></a></h3>
   <p>Represent errors in web APIs as ECMAScript error objects (e.g., <code><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-error-objects" id="ref-for-sec-error-objects">Error</a></code>)
or as <code><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>.
whether they are exceptions, promise rejection values, or properties.</p>
   <h2 data-level="9" id="device-apis"><span>9. </span><span>OS and Device Wrapper APIs</span><a href="#device-apis"></a></h2>
   <p>New APIs are now being developed in the web platform for interacting with devices.
For example, authors wish to be able to use the web to connect with their <a href="https://www.w3.org/TR/mediacapture-streams/">microphones and cameras</a>, <a href="https://www.w3.org/TR/generic-sensor/">generic sensors</a> (such as gyroscope and
accelerometer), <a href="https://www.w3.org/community/web-bluetooth/">Bluetooth</a> and <a href="https://wicg.github.io/webusb/">USB</a>-connected peripherals, <a href="https://www.w3.org/community/autowebplatform/">automobiles</a>, etc.</p>
   <p>These can be functionality provided by the underlying operating system,
or provided by a native third-party library
to interact with a device.
These are an abstraction which "wrap" the native functionality
without introducing significant complexity,
while securing the API surface to the browser.
So, these are called wrapper APIs.</p>
   <p>This section contains principles for consideration when designing APIs for devices.</p>
   <h3 data-level="9.1" id="device-ids"><span>9.1. </span><span>Use care when exposing identifying information about devices</span><a href="#device-ids"></a></h3>
   <p>If you need to give web sites access to information about a device,
use the guidelines below to decide what information to expose.</p>
   <p>Firstly, think carefully about whether it is really necessary
to expose identifying information about the device at all.
Consider whether your <a href="#priority-of-constituencies">user needs</a> could be satisfied
by a less powerful API.</p>
   <p>Exposing the presence of a device,
additional information about a device,
or device identifiers,
each increase the risk of harming the user’s privacy.</p>
   <p>One risk is that as more specific information is shared,
the set of <a href="https://www.w3.org/TR/fingerprinting-guidance/">fingerprinting data</a> available to sites gets larger.
There are also <a href="https://w3cping.github.io/privacy-threat-model/">other potential risks</a> to user privacy.</p>
   <p id="issue-70c97a29"><a href="#issue-70c97a29"></a> Privacy Threat Model is not ready for prime time.</p>
   <p>If there is no way to design a less powerful API,
use these guidelines when exposing device information:</p>
   <dl>
    <dt data-md="">Limit information in the id
    </dt><dd data-md="">
     <p>Include as little identifiable information as possible
in device ids exposed to the web plaform.
Identifiable information includes
branding, make and model numbers, etc
You can usually use a random number
or a unique id instead.
Make sure that your ids aren’t guessable,
and aren’t re-used.</p>
    </dd><dt data-md="">Keep the user in control
    </dt><dd data-md="">
     <p>When the user chooses to clear browsing data,
make sure any stored device ids are cleared.</p>
    </dd><dt data-md="">Hide sensitive ids behind a user permission
    </dt><dd data-md="">
     <p>If you can’t create a device id in an anonymous way,
limit access to it.
Make sure the user can provide <a href="#consent">meaningful consent</a> to a Web page accessing this information.</p>
    </dd><dt data-md="">Tie ids to the same-origin model
    </dt><dd data-md="">
     <p>Create distinct unique ids for the same physical device
for each origin that has has access to it.</p>
    </dd><dd data-md="">
     <p>If the same device is requested more than once
by the same origin, return the same id for it
(unless the user has cleared their browsing data).
This allows authors to avoid having
several copies of the same device.</p>
    </dd><dt data-md="">Persistable when necessary
    </dt><dd data-md="">
     <p>If a device id is time consuming to obtain,
make sure authors can store an id generated in one session
for use in a later session.
You can do this by making sure that
the procedure to generate the id
consistently produces the same id
for the same device,
for each origin.</p>
   </dd></dl>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a data-link-type="biblio" href="#biblio-least-power">[LEAST-POWER]</a></p>
    </li><li data-md="">
     <p><a data-link-type="biblio" href="#biblio-fingerprinting-guidance">[FINGERPRINTING-GUIDANCE]</a></p>
    </li><li data-md="">
     <p><a data-link-type="biblio" href="#biblio-unsanctioned-tracking">[UNSANCTIONED-TRACKING]</a></p>
   </li></ul>
   <h3 data-level="9.2" id="device-enumeration"><span>9.2. </span><span>Use care when exposing APIs for selecting or enumerating devices</span><a href="#device-enumeration"></a></h3>
   <p>Look for ways to avoid enumerating devices.
If you can’t avoid it, expose the least information possible.</p>
   <p>If an API exposes the the existence, capabilities, or identifiers of more than one device,
all of the risks in <a href="#device-ids">§ 9.1 Use care when exposing identifying information about devices</a> are multiplied by the number of devices.
For the same reasons,
consider whether your <a href="#priority-of-constituencies">user needs</a> could be satisfied
by a less powerful API. <a data-link-type="biblio" href="#biblio-least-power">[LEAST-POWER]</a></p>
   <p>If the purpose of the API
is to enable the user <strong>to select a device</strong> from the set of available devices of a particular kind,
you may not need to expose a list to script at all.
An API which invokes a User-Agent-provided device picker could suffice.
Such an API:</p>
   <ul>
    <li data-md="">
     <p>keeps the user in control,</p>
    </li><li data-md="">
     <p>doesn’t expose any device information without the user’s <a href="#consent">consent</a>,</p>
    </li><li data-md="">
     <p>doesn’t expose any fingerprinting data about the user’s environment by default, and</p>
    </li><li data-md="">
     <p>only exposes information about one device at a time.</p>
   </li></ul>
   <p>When designing API which allows users to select a device,
it may be necessary to also expose
the fact that there are devices are available to be picked.
This does expose one bit of fingerprinting data about the user’s environment
to websites,
so it isn’t quite as safe as an API which doesn’t have such a feature.</p>
   <div id="example-e2381236">
    <p><a href="#example-e2381236"></a> The <code><a data-link-type="idl" href="https://w3c.github.io/remote-playback/#remoteplayback-interface" id="ref-for-remoteplayback-interface">RemotePlayback</a></code> interface
doesn’t expose a list of available <a data-link-type="dfn" href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" id="ref-for-dfn-remote-playback-devices">remote playback devices</a>.
Instead, it allows the user to choose one device
from a device picker provided by the User Agent. 
    </p><p>It does enable websites to detect whether or not
any <a data-link-type="dfn" href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" id="ref-for-dfn-remote-playback-devices①">remote playback device</a> is available,
so the website can show or hide a control
the user can use to show the device picker.</p>
    <p>The trade-off is that by allowing websites
this extra bit of information,
the API lets authors make their user interface less confusing.
They can choose to show a button to trigger the picker
only if at least one device is available.</p>
   </div>
   <p>If you must expose a list of devices,
try to <strong>expose the smallest subset</strong> that satisfies your user needs.</p>
   <p>For example, an API which allows the website
to request <strong>a filtered or constrained list</strong> of devices
is one option to keep the number of devices smaller.
However, if authors are allowed to make multiple requests with different constraints,
they may still be able to access the full list.</p>
   <p>Finally, if you must expose the full list of devices of a particular kind,
please rigorously <strong>define the order</strong> in which devices will be listed.
This can reduce interoperability issues,
and helps to mitigate fingerprinting.
(Sort order could reveal other information:
see <a href="https://w3c.github.io/fingerprinting-guidance/#a_standardized_profile"><cite>Fingerprinting Guidance</cite> § 5.2 Standardization</a> for more.)</p>
   <p role="note"><span>Note:</span> While APIs should not
expose a full list of devices in an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> order,
they may need to for web compatibility reasons.</p>
   <h3 data-level="9.3" id="usecase-oriented-apis"><span>9.3. </span><span>Design based on user needs, not the underlying API or hardware</span><a href="#usecase-oriented-apis"></a></h3>
   <p>Design new native capabilities being brought to the web based on user needs.</p>
   <p>Avoid directly translating an existing native API to the web.</p>
   <p>Instead, consider the functionality available from the native API,
and the user needs it addresses,
and design an API that meets those user needs,
even if the implementation depends on the existing native API.</p>
   <p>Be particularly careful about exposing
the exact lifecycle and data structures of the underlying native APIs.
When possible, consider flexibility for new hardware.</p>
   <p>This means newly proposed APIs should be designed
with careful consideration on how they are intended to be used
rather than how the underlying hardware, device, or native API
available today.</p>
   <h3 data-level="9.4" id="hardware-is-scary"><span>9.4. </span><span>Be proactive about safety</span><a href="#hardware-is-scary"></a></h3>
   <p>When bringing native capabilities to the web platform,
try to design defensively.</p>
   <p>Bringing a native capability to the web platform
comes with many implications.
Users may not want websites to know that their computers
have specific capabilities. Therefore, access to anything
outside of the logical origin boundary should be permission gated.</p>
   <p>For example, if a device can store state,
and that state is readable at the same time by multiple origins,
a set of APIs that lets you read and write that state
is effectively a side-channel that undermines the origin model of the web.</p>
   <p>For these reasons, even if the device allows non-exclusive access,
you may want to consider enforcing exclusive access per-origin,
or even restricting it further to only the current active tab.</p>
   <p>Additionally, APIs should be designed so that the applications
can gracefully handle physical disruption, such as a device being unplugged.</p>
   <h3 data-level="9.5" id="wrapper-apis"><span>9.5. </span><span>Native APIs don’t typically translate well to the web</span><a href="#wrapper-apis"></a></h3>
   <p>When adapting native operating system APIs for the web,
make sure the new web APIs are designed with web platform principles in mind.</p>
   <dl>
    <dt data-md="">Make sure the web API can be implemented on more than one platform
    </dt><dd data-md="">
     <p>When designing a wrapper API,
consider how different platforms provide its functionality.</p>
     <p>Ideally, all implementations should work exactly the same,
but in some cases you may have a reason to expose options
which only work on some platforms.
If this happens, be sure to explain
how authors should write code which works on all platforms.
See <a href="#feature-detect">§ 2.5 New features should be detectable</a>.</p>
    </dd><dt data-md="">Underlying protocols should be open
    </dt><dd data-md="">
     <p>APIs which require exchange with external hardware or services
should not depend on closed or proprietary protocols.
Depending on non-open protocols undermines the open nature of the web.</p>
    </dd><dt data-md="">Design APIs to handle the user being off-line
    </dt><dd data-md="">
     <p>If an API depends on some service which is provided by a remote server,
make sure that the API functions well when the user can’t access the remote server
for any reason.</p>
    </dd><dt data-md="">Avoid additional fingerprinting surfaces
    </dt><dd data-md="">
     <p>Wrapper APIs can unintentionally expose the user to
a wider fingerprinting surface.
Please read the TAG’s finding on <a href="http://www.w3.org/2001/tag/doc/unsanctioned-tracking/">unsanctioned tracking</a> for additional details.</p>
   </dd></dl>
   <h2 data-level="10" id="other-considerations"><span>10. </span><span>Other API Design Considerations</span><a href="#other-considerations"></a></h2>
   <h3 data-level="10.1" id="polyfills"><span>10.1. </span><span>Polyfills</span><a href="#polyfills"></a></h3>
   <p>Polyfills can be hugely beneficial
in helping to roll out new features to the web platform.
The Technical Architecture Group <a href="https://www.w3.org/2001/tag/doc/polyfills/">finding on Polyfills and the Evolution of the Web</a> offers guidance that should be considered in the development of new features, notably:</p>
   <ul>
    <li data-md="">
     <p>Being "polyfillable" isn’t essential but <strong>is</strong> beneficial</p>
    </li><li data-md="">
     <p><a href="#feature-detect">§ 2.5 New features should be detectable</a></p>
    </li><li data-md="">
     <p>Polyfill development should be encouraged</p>
   </li></ul>
   <h3 data-level="10.2" id="consider-dedicatedworker-support"><span>10.2. </span><span>Where possible APIs should be made available in DedicatedWorker</span><a href="#consider-dedicatedworker-support"></a></h3>
   <p>When exposing a feature, please consider whether it makes sense to expose the feature
to DedicatedWorker as well.</p>
   <p>Many features could work out of the box on a DedicatedWorker and not enabling the feature
there could limit the ability for users to run their code in a non blocking manner.</p>
   <p>Certain challenges can exist when trying to enable a feature on DedicatedWorker,
especially if the feature requires user input by asking for permission,
or showing a picker or selector.
Even though this might discourage spec authors to support workers,
we still recommend designing the feature with DedicatedWorker support in mind,
in order to not add assumptions that will later make it unnecessarily hard to expose
these APIs to DedicatedWorker.</p>
   <h3 data-level="10.3" id="new-data-formats"><span>10.3. </span><span>New Data Formats</span><a href="#new-data-formats"></a></h3>
   <p>Always define a corresponding MIME type and extend existing APIs to support this type
for any new data format.</p>
   <p>There are cases when a new capability on the web involves adding a new data format.
This can be an image, video, audio, or any other type of data that a browser is expected
to ingest. New formats should have a standardized MIME type, which is strictly validated.</p>
   <p>While legacy media formats do not always have strict enforcement for MIME types (and
sometimes rely on peeking at headers, to workaround this), this is mostly for legacy
compatibility reasons and should not be expected or implemented for new formats.</p>
   <p>It is expected that spec authors also integrate the new format to existing APIs, so that
they are safelisted in both ingress (e.g. decoding from a ReadableStream) and egress
(e.g. encoding to a WriteableStream) points from a browser’s perspective.</p>
   <p>For example. if you are to add an image format to the web platform, first add a new MIME
type for the format. After this, you would naturally add a decoder (and presumably an
encoder) for said image format to support decoding in HTMLImageElements. On top of this,
you are also expected to add support to egress points such as HTMLCanvasElement.toBlob()
and HTMLCanvasElement.toDataURL().</p>
   <p>For legacy reasons browsers support MIME type sniffing, but we do not recommend extending
the <a href="https://mimesniff.spec.whatwg.org/#image-type-pattern-matching-algorithm">pattern matching algorithm</a>,
due to security implications, and instead recommend enforcing strict MIME types for newer formats.</p>
   <p>New MIME types should have a specification and should be registered with the Internet Assigned Numbers Authority (IANA).</p>
   
   <p>If you are defining a new HTTP header,
its syntax mustn’t go against <a href="https://tools.ietf.org/html/rfc7230#section-3.2">the HTTP specification</a>.</p>
   <p>If the new header must convey structured data,
such as lists, dictionaries, or typed values
like decimals, strings, or booleans,
then the header should use the syntax
defined in <a href="https://tools.ietf.org/html/rfc8941">Structured Field Values for HTTP</a>.
This avoids consumers of the header
having to write and maintain specific micro-parsers,
or even worse,
something that would break those existing parsers.
If the new header requires data
that can’t be represented by Structured Field Values,
then either engage with IETF about
extending the Structured Field Values syntax,
or re-consider if an HTTP header is a right place
to expose the data before inventing a new syntax. <a data-link-type="biblio" href="#biblio-rfc8941">[RFC8941]</a></p>
   <h3 data-level="10.5" id="extend-manifests"><span>10.5. </span><span>Extend existing manifest files rather than creating new ones</span><a href="#extend-manifests"></a></h3>
   <p>If your feature requires a manifest,
investigate whether you can extend an existing manifest schema.</p>
   <p>New web features should be self-contained and self-describing and ideally should not require an additional manifest file.
Some of the existing manifest files include</p>
   <ul>
    <li data-md="">
     <p><a href="https://www.w3.org/TR/appmanifest/">Web App Manifest</a> which contains features related to web applications.</p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/payment-method-manifest/">Payment Method Manifest</a> which is used for payment methods in the context of the web payment API</p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/pub-manifest/">Publication Manifest</a> which is used by some web publications working group standards</p>
    </li><li data-md="">
     <p><a href="https://wicg.github.io/origin-policy/">Origin Policy</a> which is used to set security policies.</p>
   </li></ul>
   <p>We encourage people to extend existing manifest files.
Always try to get the changes into the original spec,
or at least discuss the extension with the spec editors.
Having this discussion is more likely to result in a better design
and lead to something that better integrates with the platform.</p>
   <p>When designing new keys and values for a manifest, make sure they are needed (that is, they enable well-thought-out use-cases).
Also, please check if a similar key exists. If an existing key/value pair does more or less what is needed,
work with the existing spec to extend it to your use-case if possible.</p>
   <div role="note"><p>
     There are certain times the original spec authors might not want
to integrate changes to their manifest format immediately.
This may be due to process (like going to CR),
or due to the addition having a different scope,
like extensions to Web App Manifest only affecting store or payment use-cases.
In that case, it is acceptable to monkey-patch
as long as that is agreed with the original spec editors. 
    </p><p id="issue-05c58ddf"><a href="#issue-05c58ddf"></a> when we write up a principle on monkey patching,
be sure to take this nuance into account. <a href="https://github.com/w3ctag/design-principles/issues/184">[Issue #184]</a></p>
    <p>An example of something that was done as a monkey patch
that is scheduled to be integrated into the web app manifest in a future level (post-CR):</p>
    <ul>
     <li data-md="">
      <p>https://wicg.github.io/web-share-target/#extension-to-the-web-app-manifest</p>
    </li></ul>
   </div>
   <p>However, if your feature requires a complex set of metadata specific to a functional domain,
the creation of a new manifest may be justified.</p>
   <p>You may need to make a new manifest file if the domain of the manifest file is different from the existing manifest files.
For example, if the fetch timing is different, or if the complexity of the manifest warrants it.  Application metadata should be added
to the Web App Manifest or be an extension of it.
Manifests designated to be used for specific applications or which require interoperability with non-browsers may need to take a different approach.
Payment Method Manifest, Publication Manifest, and Origin Policy are examples of these cases.</p>
   <p>For example, if you have a single piece of metadata, even if the fetch timing is different than an existing manifest,
it is probably best to use an existing manifest (or ideally design the feature in such a way that a manifest is not required).
However, if your feature requires a complex set of metadata specific to a functional domain, the creation of a new manifest may be justified.</p>
   <p>Note that in all cases, the naming conventions should be harmonized (see <a href="#naming-is-hard">§ 12 Naming principles</a>).</p>
   <p role="note"><span>Note:</span> By principle, existing manifests use lowercase, underscore-delimited names.
There have been times where it was useful to re-use dictionaries from a manifest in DOM APIs as well,
which meant converting the names to camel-cased version.
One such example is the <a href="https://w3c.github.io/image-resource/">image resource</a>.
For this reason, if a key can clearly be expressed as a single word, that is recommended.</p>
   <h3 data-level="10.6" id="debuggability"><span>10.6. </span><span>Features should be developer-friendly</span><a href="#debuggability"></a></h3>
   <p>Any new feature should be developer-friendly.
While it is hard to quantify friendliness, at least consider the following points.</p>
   <p>While error text in exceptions should be generic,
developer-oriented error messages (such as those from a developer console) must be meaningful.
When a developer encounters an error,
the message should be specific to that error case,
and not overly generic.</p>
   <p>Ideally, developer-oriented error messages should have enough information
to guide the developer in pinpointing where the problem is.</p>
   <p>Declarative features such as CSS,
may require extra work in the implementation for debuggability.
Defining this in the specification not only makes the feature more developer-friendly,
it also ensures a consistent development experience for the users.</p>
   <p>A good example where debuggability was defined as
part of the specification is <a href="https://www.w3.org/TR/web-animations-1/#use-cases">Web Animations</a>.</p>
   <h3 data-level="10.7" id="crypto"><span>10.7. </span><span>Use the best crypto, and expect it to evolve</span><a href="#crypto"></a></h3>
   <p>Use only cryptographic algorithms
that have been impartially reviewed by security experts,
and make sure your choice of algorithm is proven, and up-to-date.
Not only do they become obsolete or insecure,
cryptographic protocols and algorithms also evolve quickly.</p>
   <h2 data-level="11" id="spec-writing"><span>11. </span><span>Writing good specifications</span><a href="#spec-writing"></a></h2>
   <p>This document mostly covers API design for the Web,
but those who design APIs are hopefully also writing specifications
for the APIs that they design.</p>
   <h3 data-level="11.1" id="requirements-on-authors-and-implementers"><span>11.1. </span><span>Identify the audience of each requirement in your specification</span><a href="#requirements-on-authors-and-implementers"></a></h3>
   <p>Document both how authors should write good code using your API,
and how implementers of your API should handle poorly-written code.</p>
   <p>The web, especially in comparison to other platforms,  is
designed to be robust in accepting poorly-formed markup.
This means that web pages which use older versions of web standards
can still be viewed in newer user agents,
and also that authors have a shallower learning curve.</p>
   <p>To support this,
web specification writers need to describe how to interpret
poorly-formed markup,
as well as well-formed markup.</p>
   <p>Implementers need to be able to understand the "supported language",
which is more complex than the "conforming language"
which authors should be aiming to use.</p>
   <p><a href="#example-52a8e009"></a> For example,
the <a href="https://html.spec.whatwg.org/multipage/tables.html#table-processing-model">Processing model</a> for the <code>&lt;table&gt;</code> element
explains how to process the contents of a <code>&lt;table&gt;</code> element,
including cases where the contents do not conform
to the <a href="https://html.spec.whatwg.org/multipage/tables.html#the-table-element:concept-element-content-model">Content model</a>. </p>
   <h3 data-level="11.2" id="avoid-ambiguity"><span>11.2. </span><span>Specify completely and avoid ambiguity</span><a href="#avoid-ambiguity"></a></h3>
   <p>When specifying how a feature should work,
make sure that there is enough information
so that authors don’t have to
write different code to work with different implementations.</p>
   <p>If a specification isn’t specific enough,
implementers might make different choices
which force authors to write extra code to handle the differences.</p>
   <p>Implementers shouldn’t need to check details of other implementations
to avoid this situation.
Instead, the specification should be complete and clear enough
on its own.</p>
   <p role="note"><span>Note:</span> This doesn’t mean that implementations can’t render things differently,
or show different user interfaces for things like permission prompts.</p>
   <p role="note"><span>Note:</span> Implementers should file bugs against specifications
which don’t give them clear enough information to write the implementation.</p>
   <h4 data-level="11.2.1" id="algorithms"><span>11.2.1. </span><span>Defining algorithms in specifications</span><a href="#algorithms"></a></h4>
   <p>Write algorithms in a way that is clear and concise.</p>
   <p>The most common way to write algorithms
is to write an explicit sequence of steps.
This often looks like pseudo-code.</p>
   <p><a href="#example-5e6a38a5"></a> The <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#dom-dialog-showmodal" id="ref-for-dom-dialog-showmodal">showModal()</a></code> method is described as a numbered sequence of steps
which clearly explains when to throw exceptions
and when to run algorithms defined in other parts of the HTML spec. </p>
   <p>When writing a sequence of steps,
imagine that it is a piece of functional code.</p>
   <ul>
    <li data-md="">
     <p>Clearly specify the inputs and outputs,
name the algorithm and the variables it uses well,
and explicitly note the points in the algorithm where the algorithm may
return a result or error.</p>
    </li><li data-md="">
     <p>As much as possible, avoid writing algorithms which have side effects.</p>
   </li></ul>
   <p>Summarize the purpose of the algorithm before going into detail,
so that readers can decide whether to read the steps or skip over them.
For example take the following steps, which ensure that there is at most one pending X
callback per top-level browsing context.</p>
   <p>A plain sequence of steps is not always the best way to write an algorithm.
For example, it might make sense to define
or re-use a formal syntax or grammar
to avoid repetition,
or define specific states to be used in a state machine.
When using extra constructs like these,
the earlier advice still applies.</p>
   <p>As much as possible,
describe algorithms as closely as possible to how they would be implemented.
This may make the spec harder to write,
but it means that implementations don’t need to figure out
how to translate what’s written in the specification
to how it should actually be implemented.
In particular, that may mean that different implementations
make different decisions
that may lead to later features being feasible in one implementation
but not another.</p>
   <p id="example-e379a9a7"><a href="#example-e379a9a7"></a> CSS selectors are read and understood from left to right,
but in practice are matched from right to left in implementations.
This allows the most specific term to be matched or not matched
quickly, avoiding unnecessary work.
The CSS selector matching algorithm is written this way,
instead of a hypothetical algorithm which would more closely match
how CSS selectors are often read by CSS authors. </p>
   <p>See also:</p>
   <ul>
    <li data-md="">
     <p><a href="https://infra.spec.whatwg.org/#algorithms">some useful definitions
and terminology</a> from <a data-link-type="biblio" href="#biblio-infra">[INFRA]</a></p>
   </li></ul>
   <h4 data-level="11.2.2" id="use-flags-for-states"><span>11.2.2. </span><span>Use explicit flags for state</span><a href="#use-flags-for-states"></a></h4>
   <p>Instead of describing state with words,
use explicit flags for state when writing algorithms.</p>
   <p>Using explicit flags makes it clear
whether or not the state changes in different error conditions,
and makes it clear when the state described by the flags is reset.</p>
   <h2 data-level="12" id="naming-is-hard"><span>12. </span><span>Naming principles</span><a href="#naming-is-hard"></a></h2>
   <p>Names take meaning from:</p>
   <ul>
    <li data-md="">
     <p>signposting (the name itself)</p>
    </li><li data-md="">
     <p>use (how people come to understand the name over time)</p>
    </li><li data-md="">
     <p>context (the object on the left-hand side, for example)</p>
   </li></ul>
   <h3 data-level="12.1" id="naming-common-words"><span>12.1. </span><span>Use common words</span><a href="#naming-common-words"></a></h3>
   <p>API naming <em>must</em> be done in easily readable US English.
Keep in mind that most web developers aren’t native English speakers.
Whenever possible, names should be chosen that use common vocabulary
a majority of English speakers are likely to understand when first encountering the name.</p>
   <div id="example-d0367763">
    <p>For example <code>setSize</code> is
a more English-readable name
than <code>cardinality</code>.</p>
   </div>
   <p>Value readability over brevity.
Keep in mind, however, that sometimes
the shorter name is the clearer one.
For instance,
it may be appropriate to use technical language or well-known terms of art
in the specification where the API is defined.</p>
   <div id="example-3cd78f17">
    <p>For example,
the Fetch API’s <code><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#body" id="ref-for-body">Body</a></code> mixin’s <code><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-body-json" id="ref-for-dom-body-json">json()</a></code> method
is named for the kind of object it returns.
JSON is a well-known term of art
among web developers likely to use the Fetch API.
It would harm comprehension
to name this API less directly connected to its return type. <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a></p>
   </div>
   <h3 data-level="12.2" id="naming-charset"><span>12.2. </span><span>Use ASCII names</span><a href="#naming-charset"></a></h3>
   <p>Names must adhere to the local language restrictions, for example CSS ident rules etc.
and <em>should</em> be in the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-code-point" id="ref-for-ascii-code-point">ASCII range</a>.</p>
   <h3 data-level="12.3" id="naming-consultation"><span>12.3. </span><span>Consultation</span><a href="#naming-consultation"></a></h3>
   <p>Please consult widely on names in your APIs.</p>
   <p>You may find good names or inspiration in surprising places.</p>
   <ul>
    <li data-md="">
     <p>What are similar APIs named on other platforms,
or in popular libraries in various programming languages?</p>
    </li><li data-md="">
     <p>Ask end users and developers what they call
things that your API works with or manipulates.</p>
    </li><li data-md="">
     <p>Look at other web platform specifications,
and seek advice from others working in related areas of the platform.</p>
    </li><li data-md="">
     <p>Also, consult if the names used are inclusive.</p>
   </li></ul>
   <p>Pay particular attention to advice you receive
with clearly-stated rationale based on underlying principles.</p>
   <div id="example-1f37c106">
    <p>Tantek Çelik <a href="https://tantek.com/2011/238/b1/many-ways-slice-url-name-pieces">extensively researched</a> how to name the various pieces of a URL.
The editors of the <a href="https://url.spec.whatwg.org/">URL spec</a> have relied on this research
when editing that document. <a data-link-type="biblio" href="#biblio-url">[URL]</a></p>
   </div>
   <h4 id="naming-web-consistency"><span>Use Web consistent names</span><a href="#naming-web-consistency"></a></h4>
    When choosing a name for feature or API that has exposure in other technology stacks,
the preference should be towards the Web ecosystem naming convention rather than other
communities. 
   <div id="example-2ef86e6f">
    <p>The NFC standard uses the term <code>media</code> to refer to what the Web calls <a href="https://mimesniff.spec.whatwg.org/#mime-type-representation">MIME type</a>.
In such cases, the naming of features or API for the purposes of Web NFC must prefer
naming consistent with <code>MIME type</code>.</p>
   </div>
   <h4 id="naming-inclusive"><span>Use Inclusive Language</span><a href="#naming-inclusive"></a></h4>
   <p>Use inclusive language whenever possible.</p>
   <p>For example,
you should use blocklist and allowlist
instead of blacklist and whitelist,
and source and replica
instead of master and slave.</p>
   <p>If you need to refer to a generic persona,
such as an author or user,
use the generic pronoun "they", "their", etc.
For example, "A user may wish to adjust their preferences".</p>
   <h3 data-level="12.4" id="naming-future-proofing"><span>12.4. </span><span>Future-proofing</span><a href="#naming-future-proofing"></a></h3>
   <p>Naming should be generic and future-proof whenever possible.</p>
   <p>The name should not be directly associated with a brand or specific revision of
the underlying technology whenever possible; technology becomes obsolete, and
removing APIs from the web is difficult.</p>
   <div id="example-fd8a196a">
    <p>The Remote Playback API was not named
after one of the pre-existing, proprietary systems it was inspired by
(such as Chromecast or AirPlay).
Instead, general terms that describe what the API does were chosen. <a data-link-type="biblio" href="#biblio-remote-playback">[REMOTE-PLAYBACK]</a></p>
   </div>
   <div id="example-c1204afc">
    <p>The <code>keydown</code> and <code>keyup</code> <code><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code>s were not named
for the specific hardware bus that keyboards used at the time.
Instead, generic names were chosen
that are as applicable to today’s Bluetooth and USB keyboards
as they were to PS/2 and ADB keyboards back then. <a data-link-type="biblio" href="#biblio-uievents">[UIEVENTS]</a></p>
   </div>
   <h3 data-level="12.5" id="naming-consistency"><span>12.5. </span><span>Consistency</span><a href="#naming-consistency"></a></h3>
    Naming schemes should aim for consistency, to avoid confusion. 
   <p>Sets of related names should agree with each other in:</p>
   <ul>
    <li data-md="">
     <p>part of speech  - noun, verb, etc.</p>
    </li><li data-md="">
     <p>negation, for example all of the names in a set should either describe what is allowed
or they should all describe what is denied</p>
   </li></ul>
   <h4 id="naming-booleans"><span>Boolean properties vs.
  boolean-returning methods</span><a href="#naming-booleans"></a></h4>
   <p>Boolean properties, options, or API arguments which are asking a question about
their argument <em>should not</em> be prefixed with <code>is</code>, while methods
that serve the same purpose, given that it has no side effects, <em>should</em> be
prefixed with <code>is</code> to be consistent with the rest of the platform.</p>
   <h4 id="casing-rules"><span>Use casing rules consistent with existing APIs</span><a href="#casing-rules"></a></h4>
   <p>Although they haven’t always been uniformly followed, through the history of web platform API
design, the following rules have emerged:</p>
   <table>
    <thead>
     <tr>
      <th>
      </th><th>Casing rule
      </th><th>Examples
    </th></tr></thead><tbody>
     <tr>
      <th>Methods and properties<br>(Web IDL attributes, operations, and dictionary keys)
      </th><td>Camel case
      </td><td><code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-createattribute" id="ref-for-dom-document-createattribute">createAttribute()</a></code><br> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-compatmode" id="ref-for-dom-document-compatmode">compatMode</a></code>
     </td></tr><tr>
      <th>Classes and mixins<br>(Web IDL interfaces)
      </th><td>Pascal case
      </td><td><code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#namednodemap" id="ref-for-namednodemap">NamedNodeMap</a></code><br> <code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#nonelementparentnode" id="ref-for-nonelementparentnode">NonElementParentNode</a></code>
     </td></tr><tr>
      <th>Initialisms in APIs
      </th><td>All caps, except when the first word in a method or property
      </td><td><code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection②">HTMLCollection</a></code><br> <code><a data-link-type="idl" href="https://w3c.github.io/DOM-Parsing/#dom-innerhtml-innerhtml" id="ref-for-dom-innerhtml-innerhtml">innerHTML</a></code><br> <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-bgcolor" id="ref-for-dom-document-bgcolor">bgColor</a></code>
     </td></tr><tr>
      <th>Repeated initialisms in APIs
      </th><td>Follow the same rule
      </td><td><code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/grouping-content.html#htmlhrelement" id="ref-for-htmlhrelement">HTMLHRElement</a></code><br> <code><a data-link-type="idl" href="https://www.w3.org/TR/webrtc/#dom-rtcdtmfsender" id="ref-for-dom-rtcdtmfsender">RTCDTMFSender</a></code><br> 
     </td></tr><tr>
      <th>The abbreviation of "identity"
      </th><td><code>Id</code>, except when the first word in a method or property
      </td><td><code><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid" id="ref-for-dom-nonelementparentnode-getelementbyid">getElementById()</a></code><br> <code><a data-link-type="idl" href="https://www.w3.org/TR/pointerevents3/#dom-pointerevent-pointerid" id="ref-for-dom-pointerevent-pointerid">pointerId</a></code><br> <code><a data-link-type="idl" href="https://w3c.github.io/webappsec-credential-management/#dom-credential-id" id="ref-for-dom-credential-id">id</a></code>
     </td></tr><tr>
      <th>Enumeration values
      </th><td>Lowercase, dash-delimited
      </td><td><code><a data-link-type="idl" href="https://w3c.github.io/webappsec-referrer-policy/#dom-referrerpolicy-no-referrer-when-downgrade" id="ref-for-dom-referrerpolicy-no-referrer-when-downgrade">"no-referrer-when-downgrade"</a></code>
     </td></tr><tr>
      <th>Events
      </th><td>Lowercase, concatenated
      </td><td><code><code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough" id="ref-for-event-media-canplaythrough">canplaythrough</a></code><br> <code><code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-languagechange" id="ref-for-event-languagechange">languagechange</a></code></code></code>
     </td></tr><tr>
      <th>HTML elements and attributes
      </th><td>Lowercase, concatenated
      </td><td><code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-figcaption-element" id="ref-for-the-figcaption-element">figcaption</a></code><br> <a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-maxlength">maxlength</a>
     </td></tr><tr>
      <th>JSON keys
      </th><td>Lowercase, underscore-delimited
      </td><td><a data-link-type="dfn" href="https://www.w3.org/TR/appmanifest/#dfn-short_name" id="ref-for-dfn-short_name">short_name</a>
   </td></tr></tbody></table>
   <div><p>
     Note that in particular, when a HTML attribute is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflect①">reflected</a> as a property, the attribute
and property’s casings won’t necessarily match. For example, the HTML attribute <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap" id="ref-for-attr-img-ismap">ismap</a></code> on <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element">img</a></code> elements is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflect②">reflected</a> as the <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap" id="ref-for-dom-img-ismap">isMap</a></code> property on <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" id="ref-for-htmlimageelement">HTMLImageElement</a></code>. 
    </p><p>The rules for JSON keys are meant to apply to specific JSON file formats sent over HTTP
or stored on disk, and don’t apply to the general notion of JavaScript object keys.</p>
    <p>Repeated initialisms are particularly non-uniform throughout the platform. Infamous historical
examples that violate the above rules are <code><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest" id="ref-for-xmlhttprequest①">XMLHttpRequest</a></code> and <code><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement" id="ref-for-htmlhtmlelement">HTMLHtmlElement</a></code>. Don’t follow their example; instead always capitalize your
initialisms, even if they are repeated.</p>
   </div>
   <h3 data-level="12.6" id="naming-unsafe"><span>12.6. </span><span>Warning about dangerous features</span><a href="#naming-unsafe"></a></h3>
   <p>Where possible, mark features that weaken
the guarantees provided to developers
by making their names start with "unsafe" so that this is more noticeable.</p>
   <p>For example, <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy (CSP)</a> provides protection against certain types of content injection vulnerabilities.
CSP also provides features that weaken this guarantee,
such as the <code>unsafe-inline</code> keyword,
which reduces CSP’s own protections by allowing inline scripts.</p>
   <h3 data-level="12.7" id="writing-resources"><span>12.7. </span><span>Other resources</span><a href="#writing-resources"></a></h3>
   <p>Some useful advice on how to write specifications is available elsewhere:</p>
   <ul>
    <li data-md="">
     <p><a href="https://ln.hixie.ch/?start=1140242962&amp;count=1">Writing
specifications: Kinds of statements</a> (Ian Hickson, 2006)</p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/qaframe-spec/">QA Framework:
Specification Guidelines</a> (W3C QA Working Group, 2005)</p>
    </li><li data-md="">
     <p><a href="https://w3c.github.io/privacy-considerations/">Privacy Considerations for Web Protocols</a></p>
    </li><li data-md="">
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/">Self-Review Questionnaire: Security and Privacy</a></p>
    </li><li data-md="">
     <p><a href="https://w3c.github.io/apa/fast/">Web Technology Accessibility Guidelines</a></p>
    </li><li data-md="">
     <p><a href="https://w3c.github.io/bp-i18n-specdev/">Internationalization Best Practices for Spec Developers</a></p>
   </li></ul>
   <h2 id="acks"><span>Acknowledgments</span><a href="#acks"></a></h2>
   <p>This document consists of
principles which have been collected
by TAG members past and present
during TAG <a href="https://github.com/w3ctag/design-reviews/">design reviews</a>.
We are indebted to everyone who has requested a design review from us.</p>
   <p>The TAG would like to thank
Adrian Hope-Bailie,
Alan Stearns,
Aleksandar Totic,
Alex Russell,
Andreas Stöckel,
Andrew Betts,
Anne van Kesteren,
Benjamin C. Wiley Sittler,
Boris Zbarsky,
Brian Kardell,
Charles McCathieNevile,
Chris Wilson,
Dan Connolly,
Daniel Ehrenberg,
Daniel Murphy,
Domenic Denicola,
Eiji Kitamura,
Eric Shepherd,
Ethan Resnick,
fantasai,
François Daoust,
Henri Sivonen,
HE Shi-Jun,
Ian Hickson,
Irene Knapp,
Jake Archibald,
Jeffrey Yasskin,
Jeremy Roman,
Jirka Kosek,
Kevin Marks,
Lachlan Hunt,
Léonie Watson,
L. Le Meur,
Lukasz Olejnik,
Maciej Stachowiak,
Marcos Cáceres,
Mark Nottingham,
Martin Thomson,
Matt Giuca,
Matt Wolenetz,
Michael[tm] Smith,
Mike West,
Nick Doty,
Nigel Megitt,
Nik Thierry,
Ojan Vafai,
Olli Pettay,
Pete Snyder,
Philip Jägenstedt,
Philip Taylor,
Reilly Grant,
Richard Ishida,
Rick Byers,
Ryan Sleevi,
Sergey Konstantinov,
Stefan Zager,
Stephen Stewart,
Steven Faulkner,
Surma,
Tab Atkins-Bittner,
Tantek Çelik,
Tobie Langel,
Travis Leithead,
and
Yoav Weiss
for their contributions to this &amp; the <a href="https://www.w3.org/TR/html-design-principles/">HTML Design Principles</a> document which preceded it.</p>
   <p>Special thanks to
Anne van Kesteren
and
Maciej Stachowiak,
who edited the <a href="https://www.w3.org/TR/html-design-principles/">HTML Design Principles</a> document.</p>
   <p>If you contributed to this document
but your name is not listed above,
please let the editors know
so they can correct this omission.</p>
  </div></div>
                
                </main>
                <footer>

                </footer>
            </div>
            <!--[if !IE]><script>fixScale(document);</script><![endif]-->
        </body>
    </html>
